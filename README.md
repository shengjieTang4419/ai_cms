# Spring AI CMS - æ™ºèƒ½ä¸ªæ€§åŒ–å¯¹è¯ç³»ç»Ÿï¼ˆå¾®æœåŠ¡ç‰ˆï¼‰

<div align="center">

![Version](https://img.shields.io/badge/version-3.0.0-blue.svg)
![Java](https://img.shields.io/badge/Java-17-orange.svg)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.0-green.svg)
![Spring AI](https://img.shields.io/badge/Spring%20AI-1.0.0-brightgreen.svg)
![Spring Cloud](https://img.shields.io/badge/Spring%20Cloud-2023.0.0-purple.svg)
![License](https://img.shields.io/badge/license-MIT-lightgrey.svg)

**ä»åŸºç¡€å¯¹è¯åˆ°æ™ºèƒ½ Agentï¼Œä»å•ä½“æ¶æ„åˆ°å¾®æœåŠ¡æ‹†åˆ†ï¼Œå†åˆ°äº‘åŸç”Ÿéƒ¨ç½²**

[åŠŸèƒ½ç‰¹æ€§](#-æ ¸å¿ƒåŠŸèƒ½) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„) â€¢ [å¾®æœåŠ¡éƒ¨ç½²](#-å¾®æœåŠ¡éƒ¨ç½²) â€¢ [API æ–‡æ¡£](#-api-æµ‹è¯•) â€¢ [æ›´æ–°æ—¥å¿—](#ç‰ˆæœ¬å†å²)

</div>

---

## ğŸ“š é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Spring AI** å’Œ **Spring AI Alibaba** æ„å»ºçš„**æ™ºèƒ½ä¸ªæ€§åŒ–å¯¹è¯ç³»ç»Ÿ**
ï¼Œé›†æˆäº†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€å‘é‡æ•°æ®åº“ã€ç”¨æˆ·ç”»åƒã€ä¸ªæ€§æ¨èç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œå®ç°äº†å®Œæ•´çš„ç”Ÿäº§çº§ AI åº”ç”¨ã€‚

### ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡         | æ•°å€¼        | è¯´æ˜                                     |
|------------|-----------|----------------------------------------|
| **æ€»åŠŸèƒ½æ•°**   | 32 é¡¹      | V1.0: 7é¡¹ï¼ŒV2.0: +14é¡¹ï¼ŒV3.0: +8é¡¹ï¼ŒV3.1: +3é¡¹ |
| **ä»£ç è¡Œæ•°**   | ~20,000 è¡Œ | Java + Vue 3                           |
| **å¾®æœåŠ¡æ•°é‡**  | 5 ä¸ª       | auth/gateway/system/membership/ai-chat |
| **æ”¯æŒæ¨¡å‹**   | 4 ä¸ª       | qwen-turbo / qwen-plus / qwen-vl-plus / qwen-thinking |
| **MCP å·¥å…·** | 6 ä¸ª       | å¤©æ°”/ä½ç½®/è·¯çº¿/æ•°æ®åº“/æ¨è/æœç´¢                     |
| **å¤šæ¨¡æ€**    | 3 ç§       | æ–‡æœ¬ / å›¾åƒ(OCR) / è¯­éŸ³(ASR)                 |
| **å¼€å‘å‘¨æœŸ**   | 3 ä¸ªæœˆ      | 2024.11 - 2025.01                      |

### ğŸ¯ é¡¹ç›®ç›®æ ‡

- å­¦ä¹  Spring AI æ¡†æ¶åŠå…¶ç”Ÿæ€
- æŒæ¡ LLM åº”ç”¨å¼€å‘çš„æ ¸å¿ƒæŠ€æœ¯
- å®è·µ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ¨¡å¼
- æ¢ç´¢å‘é‡æ•°æ®åº“åœ¨ AI åœºæ™¯ä¸­çš„åº”ç”¨
- æ„å»ºåŸºäºç”¨æˆ·ç”»åƒçš„ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ
- å®ç°å¤šæ¨¡å‹è‡ªåŠ¨åˆ‡æ¢ï¼ˆSPIæœºåˆ¶ï¼‰
- æ‰“é€ ç”Ÿäº§çº§ AI å¯¹è¯ç³»ç»Ÿ
- å®è·µå¾®æœåŠ¡æ¶æ„è®¾è®¡ä¸æ‹†åˆ†
- æŒæ¡ Spring Cloud ç”Ÿæ€ç»„ä»¶
- å®ç°äº‘åŸç”Ÿéƒ¨ç½²æ–¹æ¡ˆ

### âœ¨ V3.1 æ ¸å¿ƒå‡çº§ï¼ˆ2025å¹´1æœˆï¼‰ğŸ”¥

#### ğŸ¤– AI æ¨¡å‹å±‚é¢ï¼ˆ3é¡¹ï¼‰

- ğŸ§  **Thinkingæ¨¡å‹å®Œæ•´é›†æˆ**ï¼šæ”¯æŒæ€è€ƒè¿‡ç¨‹æµå¼è¾“å‡ºï¼Œå®ç°"å…ˆæ€è€ƒã€åå›ç­”"çš„æ•ˆæœ
  - ä½¿ç”¨DashScope SDKåŸç”ŸAPIè·å–`reasoningContent`ï¼ˆæ€è€ƒè¿‡ç¨‹ï¼‰å’Œ`content`ï¼ˆæœ€ç»ˆå›ç­”ï¼‰
  - çœŸæ­£çš„éé˜»å¡æµå¼è¾“å‡ºï¼š`Flux.from(rxFlowable).flatMap()`æ›¿ä»£`blockingForEach()`
  - ç‰¹æ®Šæ ‡è®°æ ¼å¼ï¼š`[THINKING_START]...[THINKING_END]` + `[ANSWER_START]...[ANSWER_END]`
  - å‰ç«¯å¯å®æ—¶å±•ç¤ºAIçš„æ€è€ƒè¿‡ç¨‹ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œå¯è§£é‡Šæ€§
  
- ğŸ”Œ **æ¨¡å‹Provideræ¶æ„ä¼˜åŒ–**ï¼šä»DCLåŒé‡æ£€æŸ¥é”æ”¹ä¸ºSpringå•ä¾‹ç®¡ç†
  - ç§»é™¤æ‰‹åŠ¨çš„`volatile + synchronized`åŒé‡æ£€æŸ¥é”
  - ä½¿ç”¨`@PostConstruct`åˆå§‹åŒ–ï¼Œç”±Springå®¹å™¨ä¿è¯çº¿ç¨‹å®‰å…¨
  - ä»£ç æ›´ç®€æ´ï¼Œç¬¦åˆSpringæœ€ä½³å®è·µ
  
- ğŸ¯ **åŠ¨æ€Thinkingæ¨¡å‹é€‰æ‹©**ï¼šæ–°å¢`ModelProviderManager.getThinkingProvider()`
  - è‡ªåŠ¨é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜ï¼ˆ`getPriority`å€¼æœ€å°ï¼‰ä¸”`supportsThinking=true`çš„æ¨¡å‹
  - æ”¯æŒå¤šä¸ªThinkingæ¨¡å‹å…±å­˜ï¼Œçµæ´»åˆ‡æ¢
  - å½“å‰æ”¯æŒï¼š`qwen-plus`ï¼ˆpriority=1ï¼‰ã€`qwen3-next-80b-a3b-thinking`ï¼ˆpriority=3ï¼‰

**æ€»è®¡æ–°å¢åŠŸèƒ½ï¼š3 é¡¹** | **ç´¯è®¡åŠŸèƒ½ï¼š32 é¡¹**

---

### âœ¨ V3.0 æ ¸å¿ƒå‡çº§ï¼ˆ2025å¹´12æœˆï¼‰

#### ğŸ—ï¸ å¾®æœåŠ¡æ¶æ„å±‚é¢ï¼ˆ4é¡¹ï¼‰

- â˜ï¸ **å®Œæ•´å¾®æœåŠ¡æ‹†åˆ†**ï¼šæ‹†åˆ†ä¸º cloud-authã€cloud-gatewayã€cloud-systemã€cloud-membershipã€cloud-ai-chat äº”å¤§ç‹¬ç«‹æœåŠ¡
- ğŸ”— **æœåŠ¡æ³¨å†Œå‘ç°**ï¼šé›†æˆ Nacos æ³¨å†Œä¸­å¿ƒï¼Œå®ç°æœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°
- âš™ï¸ **é…ç½®ä¸­å¿ƒç»Ÿä¸€**ï¼šNacos é…ç½®ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†å„å¾®æœåŠ¡é…ç½®
- ğŸ›¡ï¸ **API ç½‘å…³ç»Ÿä¸€**ï¼šSpring Cloud Gateway ç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±è½¬å‘ + è´Ÿè½½å‡è¡¡ + é™æµç†”æ–­

#### ğŸ” å®‰å…¨è®¤è¯å±‚é¢ï¼ˆ2é¡¹ï¼‰

- ğŸ« **ç»Ÿä¸€è®¤è¯ä¸­å¿ƒ**ï¼šcloud-auth æä¾›ç»Ÿä¸€ JWT è®¤è¯æœåŠ¡
- ğŸ”„ **Token æ— æ„Ÿåˆ·æ–°**ï¼šå®ç° Token è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

#### ğŸ“¦ éƒ¨ç½²å±‚é¢ï¼ˆ2é¡¹ï¼‰

- ğŸ³ **Docker å®¹å™¨åŒ–**ï¼šå„å¾®æœåŠ¡ Docker é•œåƒæ„å»º
- ğŸš¢ **Docker Compose**ï¼šä¸€é”®å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡åŠä¾èµ–ä¸­é—´ä»¶

**æ€»è®¡æ–°å¢åŠŸèƒ½ï¼š8 é¡¹** | **ç´¯è®¡åŠŸèƒ½ï¼š29 é¡¹**

### âœ¨ V2.0 æ ¸å¿ƒå‡çº§ï¼ˆ2025å¹´10æœˆ-11æœˆï¼‰

#### ğŸ—ï¸ æ¶æ„å±‚é¢ï¼ˆ3é¡¹ï¼‰

- âš™ï¸ **æœåŠ¡æ¨¡å—æ‹†åˆ†**ï¼šé¢„å¤‡å¾®æœåŠ¡åŒ–ï¼Œæ‹†åˆ†ä¸º cloud-systemã€cloud-membershipã€cloud-ai-chat ä¸‰å¤§æ¨¡å—
- ğŸ”Œ **å¤šæ¨¡å‹ SPI æœºåˆ¶**ï¼šç»Ÿä¸€æ¥å£ï¼Œæ”¯æŒ DashScopeã€OpenAIã€DeepSeek ç­‰å¤šå®¶ AI æœåŠ¡å•†çƒ­æ’æ‹”
- ğŸ§© **MCP Schema åŒ–**ï¼šä»å•ä¸€ PgSQL MCP åˆ°ç»Ÿä¸€ Schema ç®¡ç†ï¼Œæ”¯æŒå¤©æ°”ã€ä½ç½®ã€è·¯çº¿è§„åˆ’ç­‰å¤šç§å·¥å…·

#### ğŸ’¡ AI èƒ½åŠ›å±‚é¢ï¼ˆ4é¡¹ï¼‰

- ğŸ§  **Prompt å·¥ç¨‹é‡æ„**ï¼šå¯¹æŠ— AI å¹»è§‰ï¼Œåˆ†å±‚ Promptï¼ˆç³»ç»Ÿ+ä¸Šä¸‹æ–‡+ä»»åŠ¡ï¼‰+ Few-Shot + Chain-of-Thought
- ğŸ·ï¸ **AI ä¸ªæ€§æ ‡ç­¾ç®—æ³•**ï¼šW-TinyLFU + åŠçƒ­åº¦è¡°å‡ï¼Œé‡å æ ‡ç­¾å¿«é€Ÿä¸Šå‡ Ã—2ï¼Œæœˆåº¦è¡°å‡ Ã—0.5
- ğŸ’­ **æ·±åº¦æ€è€ƒåŠŸèƒ½**ï¼šç±»ä¼¼ OpenAI o1ï¼ŒChain-of-Thought æ¨ç†é“¾ï¼ˆâœ… V3.1å·²å®Œå–„æ€è€ƒè¿‡ç¨‹è¾“å‡ºï¼‰
- ğŸŒ **è”ç½‘æœç´¢**ï¼šDashScope enableSearchï¼Œå®æ—¶æ£€ç´¢å¤–éƒ¨ä¿¡æ¯å¹¶å¼•ç”¨æ¥æº

#### ğŸ“Š ç”¨æˆ·ä½“éªŒå±‚é¢ï¼ˆ4é¡¹ï¼‰

- ğŸ‘¤ **ä¼šå‘˜ç”»åƒç³»ç»Ÿ**ï¼šå¤šç»´åº¦ç”¨æˆ·æ´å¯Ÿï¼ˆåŸºç¡€ä¿¡æ¯+å…´è¶£æ ‡ç­¾+è¡Œä¸ºç‰¹å¾+ç¤¾äº¤ç”»åƒ+æ¶ˆè´¹åå¥½ï¼‰
- ğŸ’¬ **ä¸ªæ€§åŒ–è¯é¢˜å¼•å¯¼**ï¼šå¯¹è¯ç»“æŸåæ™ºèƒ½æ¨è 3-5 ä¸ªç›¸å…³è¯é¢˜
- ğŸ  **é¦–é¡µä¸ªæ€§æ¨è**ï¼šåƒäººåƒé¢å†…å®¹åˆ†å‘ï¼ˆ60%æ ‡ç­¾+20%ååŒ+10%çƒ­é—¨+10%æ¢ç´¢ï¼‰
- ğŸ“ **Markdown å®æ—¶æ¸²æŸ“**ï¼šæµå¼è¾“å‡ºå®Œç¾æ”¯æŒï¼Œæ¸è¿›å¼è§£æï¼Œä»£ç å—å¹³æ»‘æ¸²æŸ“

#### ğŸ¨ å¤šæ¨¡æ€èƒ½åŠ›ï¼ˆ3é¡¹ï¼‰

- ğŸ–¼ï¸ **OCR å›¾ç‰‡è¯†åˆ«**ï¼šDashScope OCRï¼Œè‡ªåŠ¨è¯†åˆ«æ–‡å­—ã€è¡¨æ ¼ã€å…¬å¼ï¼Œæ”¯æŒå›¾æ–‡æ··åˆå¯¹è¯
- ğŸ¤ **ASR è¯­éŸ³è¯†åˆ«**ï¼šRecordRTC å½•åˆ¶ WAVï¼ˆ16kHzï¼‰ï¼Œæ”¯æŒé•¿æ—¶é—´å½•éŸ³ï¼Œè‡ªåŠ¨å¡«å…¥è¾“å…¥æ¡†
- ğŸ—ºï¸ **é«˜å¾·åœ°å›¾æ·±åº¦é›†æˆ**ï¼šåœ°å€æœç´¢ã€è·¯çº¿è§„åˆ’ï¼ˆé©¾è½¦/æ­¥è¡Œ/éª‘è¡Œï¼‰ã€å‘¨è¾¹æ¢ç´¢ã€å¤©æ°”æŸ¥è¯¢

**æ€»è®¡æ–°å¢åŠŸèƒ½ï¼š14 é¡¹** | **V2.0ç´¯è®¡åŠŸèƒ½ï¼š21 é¡¹**

---

## ğŸ§  Thinkingæ¨¡å‹ - æ·±åº¦æ€è€ƒèƒ½åŠ› ğŸ”¥ NEW

### æ ¸å¿ƒç‰¹æ€§

Thinkingæ¨¡å‹æ˜¯V3.1çš„é‡å¤§å‡çº§ï¼Œå®ç°äº†ç±»ä¼¼OpenAI o1çš„æ·±åº¦æ¨ç†èƒ½åŠ›ï¼Œè®©AI"å…ˆæ€è€ƒã€åå›ç­”"ã€‚

#### å·¥ä½œåŸç†

```
ç”¨æˆ·æé—® â†’ Thinkingæ¨¡å‹å¯åŠ¨
    â†“
[æ€è€ƒé˜¶æ®µ] æµå¼è¾“å‡ºæ¨ç†è¿‡ç¨‹
    â”œâ”€ åˆ†æé—®é¢˜çš„å…³é”®ç‚¹
    â”œâ”€ è€ƒè™‘å¤šç§è§£å†³æ–¹æ¡ˆ
    â”œâ”€ è¯„ä¼°å„æ–¹æ¡ˆçš„ä¼˜åŠ£
    â””â”€ é€‰æ‹©æœ€ä½³ç­”æ¡ˆ
    â†“
[å›ç­”é˜¶æ®µ] æµå¼è¾“å‡ºæœ€ç»ˆç­”æ¡ˆ
    â””â”€ åŸºäºæ€è€ƒè¿‡ç¨‹ç»™å‡ºç»“è®º
```

#### æŠ€æœ¯å®ç°

**1. æ¨¡å‹Provideræ¶æ„ä¼˜åŒ–**

```java
@Component
public class QwenPlusProvider implements ModelProvider {
    private ChatClient chatClient;
    
    @PostConstruct  // âœ… ä½¿ç”¨Springç®¡ç†ç”Ÿå‘½å‘¨æœŸ
    public void init() {
        this.chatClient = ChatClientHelper.buildChatClient(...);
    }
    
    @Override
    public boolean supportsThinking() {
        return true;  // æ ‡è®°æ”¯æŒThinking
    }
    
    @Override
    public int getPriority() {
        return 1;  // ä¼˜å…ˆçº§æœ€é«˜
    }
}
```

**2. åŠ¨æ€æ¨¡å‹é€‰æ‹©**

```java
// ModelProviderManageræ–°å¢æ–¹æ³•
public ModelProvider getThinkingProvider() {
    return providers.values().stream()
            .filter(ModelProvider::supportsThinking)
            .min(Comparator.comparingInt(ModelProvider::getPriority))
            .orElse(defaultProvider);
}

// AIChatServiceè‡ªåŠ¨é€‰æ‹©
ModelProvider thinkingProvider = modelSelector
    .getProviderManager()
    .getThinkingProvider();
```

**3. çœŸæ­£çš„æµå¼è¾“å‡º**

```java
// âŒ ä¹‹å‰ï¼šé˜»å¡ç­‰å¾…æ‰€æœ‰æ•°æ®
result.blockingForEach(message -> { ... });

// âœ… ç°åœ¨ï¼šéé˜»å¡æµå¼è¾“å‡º
return Flux.from(rxFlowable)
    .flatMap(message -> {
        String reasoning = message.getReasoningContent();  // æ€è€ƒè¿‡ç¨‹
        String content = message.getContent();             // æœ€ç»ˆå›ç­”
        // æœ‰æ•°æ®ç«‹å³å‘é€ï¼Œä¸ç­‰å¾…
        return Flux.fromIterable(chunks);
    })
    .subscribeOn(Schedulers.boundedElastic());
```

**4. å“åº”æ ¼å¼**

```
[THINKING_START]
ç”¨æˆ·è¯¢é—®äº†å…³äºé‡å­è®¡ç®—çš„é—®é¢˜...
æˆ‘éœ€è¦ä»åŸºç¡€æ¦‚å¿µå¼€å§‹è§£é‡Š...
é¦–å…ˆè¦è®²æ¸…æ¥šé‡å­æ¯”ç‰¹å’Œç»å…¸æ¯”ç‰¹çš„åŒºåˆ«...
ç„¶åè¯´æ˜é‡å­å åŠ å’Œé‡å­çº ç¼ çš„åŸç†...
[THINKING_END]
[ANSWER_START]
é‡å­è®¡ç®—æ˜¯åˆ©ç”¨é‡å­åŠ›å­¦åŸç†è¿›è¡Œä¿¡æ¯å¤„ç†çš„æ–°å‹è®¡ç®—æ–¹å¼ã€‚

ä¸»è¦ç‰¹ç‚¹ï¼š
1. **é‡å­å åŠ **ï¼šé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äºå¤šä¸ªçŠ¶æ€
2. **é‡å­çº ç¼ **ï¼šå¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å…³è”
...
[ANSWER_END]
```

#### å‰ç«¯é›†æˆ

```typescript
// è§£æThinkingå“åº”
class ThinkingStreamParser {
  parseChunk(chunk: string) {
    if (chunk.includes('[THINKING_START]')) {
      // å¼€å§‹å±•ç¤ºæ€è€ƒè¿‡ç¨‹
      showThinkingSection();
    }
    if (chunk.includes('[THINKING_END]')) {
      // æ€è€ƒå®Œæˆï¼Œå‡†å¤‡å±•ç¤ºç­”æ¡ˆ
      completeThinkingAnimation();
    }
    if (chunk.includes('[ANSWER_START]')) {
      // å¼€å§‹å±•ç¤ºæœ€ç»ˆç­”æ¡ˆ
      showAnswerSection();
    }
  }
}
```

#### ä½¿ç”¨åœºæ™¯

| åœºæ™¯       | ç¤ºä¾‹                     | æ•ˆæœ                 |
|----------|------------------------|---------------------|
| å¤æ‚æ¨ç†   | æ•°å­¦è¯æ˜ã€é€»è¾‘æ¨ç†            | å±•ç¤ºå®Œæ•´çš„æ¨ç†é“¾æ¡         |
| ä»£ç åˆ†æ   | ç®—æ³•ä¼˜åŒ–ã€Bugå®šä½            | å±•ç¤ºåˆ†ææ€è·¯å’Œå†³ç­–è¿‡ç¨‹       |
| æ–¹æ¡ˆè®¾è®¡   | ç³»ç»Ÿæ¶æ„ã€æŠ€æœ¯é€‰å‹            | å±•ç¤ºå¤šæ–¹æ¡ˆå¯¹æ¯”å’Œæƒè¡¡        |
| é—®é¢˜è¯Šæ–­   | æ•…éšœæ’æŸ¥ã€æ€§èƒ½ä¼˜åŒ–            | å±•ç¤ºè¯Šæ–­æ­¥éª¤å’Œæ’æŸ¥é€»è¾‘       |

#### APIè°ƒç”¨

```bash
# å¯ç”¨æ·±åº¦æ€è€ƒæ¨¡å¼
curl -X POST "http://localhost:8084/api/aiChat/simple/streamChat" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "è§£é‡Šä¸€ä¸‹MESIç¼“å­˜ä¸€è‡´æ€§åè®®çš„å·¥ä½œåŸç†",
    "sessionId": "test-001",
    "isDeepThinking": true
  }'
```

#### æŠ€æœ¯äº®ç‚¹

- âœ… **å®Œæ•´æ€è€ƒè¿‡ç¨‹**ï¼šä½¿ç”¨DashScope SDKåŸç”ŸAPIï¼Œå®Œæ•´è·å–`reasoningContent`
- âœ… **çœŸæ­£æµå¼è¾“å‡º**ï¼šéé˜»å¡å“åº”å¼æµï¼Œæœ‰æ•°æ®ç«‹å³å‘é€
- âœ… **åŠ¨æ€æ¨¡å‹é€‰æ‹©**ï¼šè‡ªåŠ¨é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„Thinkingæ¨¡å‹
- âœ… **å‰ç«¯å‹å¥½æ ¼å¼**ï¼šä½¿ç”¨ç‰¹æ®Šæ ‡è®°ï¼Œå‰ç«¯å¯çµæ´»æ§åˆ¶å±•ç¤ºæ•ˆæœ
- âœ… **Springæœ€ä½³å®è·µ**ï¼šä½¿ç”¨`@PostConstruct`æ›¿ä»£DCLï¼Œä»£ç æ›´ç®€æ´

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯                    | ç‰ˆæœ¬                 | ç”¨é€”             |
|-----------------------|--------------------|----------------|
| Spring Boot           | 3.4.0              | å¾®æœåŠ¡åº”ç”¨æ¡†æ¶        |
| Spring Cloud          | 2023.0.0           | å¾®æœåŠ¡ç”Ÿæ€          |
| Spring AI             | 1.0.0              | AI æ¡†æ¶æ ¸å¿ƒ        |
| Spring AI Alibaba     | 1.0.0.3            | é˜¿é‡Œäº‘ AI é›†æˆ      |
| Java                  | 17                 | ç¼–ç¨‹è¯­è¨€           |
| PostgreSQL + PgVector | Latest             | å‘é‡æ•°æ®åº“          |
| Redis                 | Latest             | ä¼šè¯è®°å¿†/ç¼“å­˜        |
| MongoDB               | Latest             | èŠå¤©å†å²/å›¾ç‰‡å…ƒæ•°æ®     |
| MinIO                 | 8.5.9              | å¯¹è±¡å­˜å‚¨ï¼ˆå›¾ç‰‡ï¼‰       |
| Nacos                 | Latest             | æ³¨å†Œä¸­å¿ƒ+é…ç½®ä¸­å¿ƒ      |
| Spring Cloud Gateway  | Latest             | API ç½‘å…³         |
| é€šä¹‰åƒé—®ï¼ˆDashScopeï¼‰       | qwen-turbo/vl-plus | LLM æ¨¡å‹ï¼ˆæ–‡æœ¬/å¤šæ¨¡æ€ï¼‰ |
| DashScope SDK         | 2.21.8             | OCRã€è”ç½‘æœç´¢       |
| Apache Tika           | 2.9.2              | æ–‡æ¡£è§£æ           |
| Docker                | Latest             | å®¹å™¨åŒ–éƒ¨ç½²          |
| Docker Compose        | Latest             | å®¹å™¨ç¼–æ’           |

### é¡¹ç›®ç»“æ„

```
cms/
â”œâ”€â”€ cloud-common/                    # å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ cloud-common-core/          # æ ¸å¿ƒå·¥å…·
â”‚   â”œâ”€â”€ cloud-common-datasource/    # æ•°æ®æºé…ç½®
â”‚   â”œâ”€â”€ cloud-common-mongodb/       # MongoDB é›†æˆ
â”‚   â”œâ”€â”€ cloud-common-redis/         # Redis é›†æˆ
â”‚   â””â”€â”€ cloud-common-security/      # å®‰å…¨è®¤è¯ï¼ˆJWTï¼‰
â”œâ”€â”€ cloud-auth/                     # è®¤è¯æœåŠ¡ä¸­å¿ƒ ğŸ†”
â”‚   â””â”€â”€ cloud-auth-biz/             # è®¤è¯ä¸šåŠ¡å®ç°
â”œâ”€â”€ cloud-gateway/                  # API ç½‘å…³æœåŠ¡ ğŸšª
â”‚   â””â”€â”€ cloud-gateway-biz/          # ç½‘å…³è·¯ç”±é…ç½®
â”œâ”€â”€ cloud-system/                   # ç³»ç»Ÿç®¡ç†æœåŠ¡ âš™ï¸
â”‚   â”œâ”€â”€ cloud-system-api/           # ç³»ç»ŸæœåŠ¡æ¥å£
â”‚   â””â”€â”€ cloud-system-biz/           # ç³»ç»ŸæœåŠ¡å®ç°
â”œâ”€â”€ cloud-membership/               # ä¼šå‘˜æ ‡ç­¾æœåŠ¡ ğŸ‘¤
â”‚   â”œâ”€â”€ cloud-membership-api/       # ä¼šå‘˜æœåŠ¡æ¥å£
â”‚   â””â”€â”€ cloud-membership-biz/       # ä¼šå‘˜æœåŠ¡å®ç°
â”œâ”€â”€ cloud-ai-chat/                  # AI èŠå¤©æ ¸å¿ƒæœåŠ¡ ğŸ¤–
â”‚   â”œâ”€â”€ cloud-ai-chat-api/          # AIèŠå¤©æœåŠ¡æ¥å£
â”‚   â””â”€â”€ cloud-ai-chat-biz/          # AIèŠå¤©æœåŠ¡å®ç°
â”‚       â”œâ”€â”€ provider/               # SPIæ¨¡å‹æä¾›è€…
â”‚       â”œâ”€â”€ service/                # ä¸šåŠ¡æœåŠ¡å±‚
â”‚       â”œâ”€â”€ mcp/                    # MCPå·¥å…·ï¼ˆå¤©æ°”ã€æ¨èç­‰ï¼‰
â”‚       â”œâ”€â”€ controller/             # REST API
â”‚       â””â”€â”€ domain/                 # é¢†åŸŸæ¨¡å‹
â”œâ”€â”€ init/                           # åˆå§‹åŒ–é…ç½®
â”‚   â”œâ”€â”€ docker/                     # Docker Compose é…ç½®
â”‚   â”œâ”€â”€ sql/                        # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ nacos/                      # Nacos é…ç½®æ–‡ä»¶ï¼ˆå¾…æ·»åŠ ï¼‰
â””â”€â”€ pom.xml                         # çˆ¶é¡¹ç›®é…ç½®
```

---

## ğŸ—ï¸ å¾®æœåŠ¡æ¶æ„

### æ¶æ„æ¦‚è§ˆ

æœ¬é¡¹ç›®é‡‡ç”¨**å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„**ï¼Œå°†ç³»ç»ŸæŒ‰ä¸šåŠ¡åŸŸæ‹†åˆ†ä¸º 5 ä¸ªç‹¬ç«‹æœåŠ¡ï¼š

```mermaid
graph TB
    Client[å®¢æˆ·ç«¯] --> Gateway[cloud-gateway:8080]
    Gateway --> Auth[cloud-auth:8081]
    Gateway --> System[cloud-system:8082]
    Gateway --> Membership[cloud-membership:8083]
    Gateway --> AIChat[cloud-ai-chat:8084]
    
    Auth -.-> Nacos[(Nacos:8848)]
    System -.-> Nacos
    Membership -.-> Nacos
    AIChat -.-> Nacos
    Gateway -.-> Nacos
    
    System --> DB[(PostgreSQL)]
    Membership --> DB
    AIChat --> Redis[(Redis)]
    AIChat --> MongoDB[(MongoDB)]
    AIChat --> MinIO[(MinIO)]
```

### æœåŠ¡èŒè´£

| æœåŠ¡                   | ç«¯å£   | èŒè´£     | æ ¸å¿ƒåŠŸèƒ½                 |
|----------------------|------|--------|----------------------|
| **cloud-gateway**    | 8080 | API ç½‘å…³ | è·¯ç”±è½¬å‘ã€è´Ÿè½½å‡è¡¡ã€é™æµç†”æ–­ã€ç»Ÿä¸€é‰´æƒ  |
| **cloud-auth**       | 8081 | è®¤è¯ä¸­å¿ƒ   | ç”¨æˆ·è®¤è¯ã€JWT ç”Ÿæˆã€Token åˆ·æ–° |
| **cloud-system**     | 8082 | ç³»ç»Ÿç®¡ç†   | ç”¨æˆ·ç®¡ç†ã€è§’è‰²æƒé™ã€ç³»ç»Ÿé…ç½®       |
| **cloud-membership** | 8083 | ä¼šå‘˜æœåŠ¡   | ç”¨æˆ·ç”»åƒã€æ ‡ç­¾ç®¡ç†ã€ä¸ªæ€§æ¨è       |
| **cloud-ai-chat**    | 8084 | AI èŠå¤©  | å¯¹è¯æœåŠ¡ã€RAG é—®ç­”ã€å¤šæ¨¡æ€å¤„ç†    |

### æœåŠ¡é€šä¿¡

- **åŒæ­¥è°ƒç”¨**ï¼šFeign + OpenFeign è¿›è¡ŒæœåŠ¡é—´ HTTP è°ƒç”¨
- **æ³¨å†Œå‘ç°**ï¼šNacos ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°
- **é…ç½®ç®¡ç†**ï¼šNacos é…ç½®ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†å„æœåŠ¡é…ç½®
- **è´Ÿè½½å‡è¡¡**ï¼šSpring Cloud LoadBalancer
- **ç†”æ–­é™çº§**ï¼šSentinelï¼ˆå¯é€‰ï¼‰

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. SPIæœºåˆ¶ - å¤šæ¨¡å‹è‡ªåŠ¨åˆ‡æ¢ ğŸ”¥

#### 1.1 è®¾è®¡ç†å¿µ

- **æ’ä»¶åŒ–æ‰©å±•**ï¼šåŸºäº Java SPI æ€æƒ³ï¼Œå®ç°æ¨¡å‹æä¾›è€…çš„çƒ­æ’æ‹”
- **è‡ªåŠ¨å‘ç°**ï¼šSpring å®¹å™¨è‡ªåŠ¨æ‰«æå¹¶åŠ è½½æ‰€æœ‰ `ModelProvider` å®ç°
- **æ™ºèƒ½è·¯ç”±**ï¼šæ ¹æ®è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆå›¾ç‰‡ã€RAGã€è”ç½‘ï¼‰è‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„æ¨¡å‹

#### 1.2 æ ¸å¿ƒæ¥å£

```java
public interface ModelProvider {
    String getModelName();          // æ¨¡å‹å”¯ä¸€æ ‡è¯†
    String getDisplayName();        // æ¨¡å‹æ˜¾ç¤ºåç§°
    boolean supportsVision();       // æ˜¯å¦æ”¯æŒå›¾ç‰‡
    boolean supportsStream();       // æ˜¯å¦æ”¯æŒæµå¼
    boolean supportsThinking();     // æ˜¯å¦æ”¯æŒæ·±åº¦æ€è€ƒï¼ˆNEW in V3.1ï¼‰
    ChatClient getChatClient();     // è·å–ChatClientå®ä¾‹
    int getPriority();              // ä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå°è¶Šé«˜ï¼‰
}
```

#### 1.3 å·²å®ç°æ¨¡å‹

| æ¨¡å‹                         | èƒ½åŠ›                       | ä¼˜å…ˆçº§ | ä½¿ç”¨åœºæ™¯              |
|----------------------------|--------------------------|-----|-------------------|
| qwen-turbo                 | æ–‡æœ¬å¯¹è¯ã€æµå¼ã€Function Calling | 10  | æ™®é€šå¯¹è¯ã€å·¥å…·è°ƒç”¨         |
| qwen-plus                  | æ–‡æœ¬å¯¹è¯ã€æµå¼ã€Thinking         | 1   | æ·±åº¦æ€è€ƒã€å¤æ‚æ¨ç†         |
| qwen-vl-plus               | å¤šæ¨¡æ€ï¼ˆå›¾æ–‡ï¼‰ã€æµå¼               | 5   | å›¾ç‰‡è¯†åˆ«ã€å›¾æ–‡æ··åˆå¯¹è¯       |
| qwen3-next-80b-a3b-thinking | æ·±åº¦æ¨ç†ã€Thinking            | 3   | å¤æ‚é€»è¾‘æ¨ç†ã€æ•°å­¦é—®é¢˜ã€ä»£ç åˆ†æ |

#### 1.4 æ™ºèƒ½æ¨¡å‹é€‰æ‹©

```java
// è‡ªåŠ¨é€‰æ‹©ï¼šæœ‰å›¾ç‰‡ â†’ Visionæ¨¡å‹ï¼Œæ— å›¾ç‰‡ â†’ æ–‡æœ¬æ¨¡å‹
ChatContext context = ChatContext.builder()
                .query(query)
                .imageUrls(imageList)
                .ragEnhanced(false)
                .build();

ModelProvider provider = modelSelector.selectModelProvider(context);
```

**æŠ€æœ¯äº®ç‚¹**ï¼š

- âœ… **é›¶é…ç½®æ‰©å±•**ï¼šæ–°å¢æ¨¡å‹åªéœ€å®ç°æ¥å£å¹¶åŠ  `@Component`
- âœ… **Springå•ä¾‹ç®¡ç†**ï¼šä½¿ç”¨`@PostConstruct`åˆå§‹åŒ–ï¼Œç”±Springå®¹å™¨ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ˆV3.1ä¼˜åŒ–ï¼‰
- âœ… **ä¼˜é›…é™çº§**ï¼šæ¨¡å‹ä¸å­˜åœ¨æ—¶è‡ªåŠ¨å›é€€åˆ°é»˜è®¤æ¨¡å‹
- âœ… **åŠ¨æ€Thinkingé€‰æ‹©**ï¼šè‡ªåŠ¨é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„Thinkingæ¨¡å‹ï¼ˆV3.1æ–°å¢ï¼‰

---

### 2. å¤šæ¨¡æ€å·¥å…· Provider æ¶æ„ - OCR & ASR ğŸ› ï¸

#### 2.0 æ¶æ„ç†å¿µï¼šå·¥å…· vs å¯¹è¯æ¨¡å‹

å¤šæ¨¡æ€èƒ½åŠ›ï¼ˆOCRã€ASRï¼‰è™½ç„¶ä¹Ÿæ˜¯ AI æ¨¡å‹ï¼Œä½†ä¸ SPI æœºåˆ¶ä¸‹çš„ `ModelProvider` **æœ‰æœ¬è´¨åŒºåˆ«**ï¼š

| å¯¹æ¯”ç»´åº¦                 | ModelProvider (å¯¹è¯æ¨¡å‹) | OCR/ASR Provider (å¤šæ¨¡æ€å·¥å…·) |
|----------------------|----------------------|--------------------------|
| **å®šä½**               | æ ¸å¿ƒå¯¹è¯å¼•æ“               | å‰ç½®æ•°æ®å¤„ç†å·¥å…·                 |
| **è°ƒç”¨æ—¶æœº**             | ç”¨æˆ·å‘èµ·å¯¹è¯æ—¶              | å¯¹è¯å‰çš„é¢„å¤„ç†é˜¶æ®µ                |
| **è®°å¿†è”æƒ³**             | âœ… éœ€è¦ä¸Šä¸‹æ–‡è®°å¿†            | âŒ æ— çŠ¶æ€ï¼Œå•æ¬¡å¤„ç†               |
| **æµå¼è¾“å‡º**             | âœ… æ”¯æŒ SSE æµå¼å“åº”        | âŒ åŒæ­¥è¿”å›ç»“æœ                 |
| **Function Calling** | âœ… æ”¯æŒå·¥å…·è°ƒç”¨             | âŒ ä»…åšæ•°æ®è½¬æ¢                 |
| **å…¸å‹åœºæ™¯**             | èŠå¤©å¯¹è¯ã€RAG é—®ç­”          | å›¾ç‰‡è¯†åˆ«ã€è¯­éŸ³è½¬æ–‡å­—               |

**æ ¸å¿ƒæ€æƒ³**ï¼šOCR/ASR æ˜¯**æ•°æ®æ ¼å¼è½¬æ¢å™¨**ï¼Œå°†å›¾ç‰‡/éŸ³é¢‘è½¬ä¸ºæ–‡æœ¬åï¼Œå†äº¤ç»™ ModelProvider è¿›è¡Œå¯¹è¯ã€‚

#### 2.1 OCR/ASR ç»Ÿä¸€ Provider æ¶æ„

ä¸ ModelProvider ç±»ä¼¼ï¼ŒOCR/ASR ä¹Ÿé‡‡ç”¨ **Provider SPI æœºåˆ¶**ï¼Œä½†æ›´åŠ è½»é‡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¤šæ¨¡æ€å·¥å…·å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AsrProvider (æ¥å£)          OcrProvider (æ¥å£)              â”‚
â”‚  â”œâ”€ DashScopeAsrProvider     â”œâ”€ DashScopeOcrProvider        â”‚
â”‚  â”œâ”€ BaiduAsrProvider         â”œâ”€ BaiduOcrProvider            â”‚
â”‚  â””â”€ TencentAsrProvider       â””â”€ TencentOcrProvider          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AsrProviderManager          OcrProviderManager             â”‚
â”‚  (è‡ªåŠ¨å‘ç°ã€ä¼˜å…ˆçº§ã€é™çº§)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AsrService                  OCRService                      â”‚
â”‚  (ä¸šåŠ¡è°ƒåº¦å±‚ï¼Œæ—  SDK è€¦åˆ)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä»£ç ç¤ºä¾‹**ï¼š

```java
// 1. Provider æ¥å£å®šä¹‰
public interface AsrProvider {
    String getProviderName();          // dashscope/baidu/tencent

    String[] getSupportedFormats();    // ["wav", "mp3", "pcm"]

    String recognizeAudio(MultipartFile audioFile);

    int getPriority();                 // ä¼˜å…ˆçº§

    default boolean isEnabled() {
        return true;
    }
}

// 2. DashScope å®ç°
@Component
@ConditionalOnProperty(
        prefix = "ai.provider.asr.dashscope",
        name = "enabled",
        havingValue = "true",
        matchIfMissing = true  // é»˜è®¤å¯ç”¨
)
public class DashScopeAsrProvider implements AsrProvider {
    @Override
    public String recognizeAudio(MultipartFile audioFile) {
        // è°ƒç”¨ DashScope ASR SDK
    }
}

// 3. ä¸šåŠ¡å±‚è°ƒç”¨ï¼ˆæ—  SDK è€¦åˆï¼‰
@Service
public class AsrService {
    private final AsrProviderManager providerManager;

    public String recognizeAudio(MultipartFile audioFile) {
        AsrProvider provider = providerManager.getDefaultProvider();
        return provider.recognizeAudio(audioFile);
    }
}
```

**æŠ€æœ¯äº®ç‚¹**ï¼š

- âœ… **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡ YAML åŠ¨æ€å¯ç”¨/ç¦ç”¨ Provider
- âœ… **å¤šå‚å•†æ”¯æŒ**ï¼šé˜¿é‡Œäº‘ã€ç™¾åº¦ã€è…¾è®¯ç­‰å¿«é€Ÿæ¥å…¥
- âœ… **è‡ªåŠ¨é™çº§**ï¼šä¸» Provider å¤±è´¥æ—¶åˆ‡æ¢å¤‡ç”¨
- âœ… **é›¶ä¸šåŠ¡ä¾µå…¥**ï¼šService å±‚æ—  SDK ä¾èµ–ï¼Œæ˜“äºæµ‹è¯•

#### 2.2 é…ç½®ç¤ºä¾‹

```yaml
ai:
  provider:
    # ASR è¯­éŸ³è¯†åˆ«
    asr:
      dashscope:
        enabled: true          # å¯ç”¨/ç¦ç”¨
        model: fun-asr-realtime
        sample-rate: 16000
        priority: 1            # ä¼˜å…ˆçº§ï¼ˆè¶Šå°è¶Šé«˜ï¼‰
      # æœªæ¥æ‰©å±•å…¶ä»–å‚å•†
      baidu:
        enabled: false
        priority: 5

    # OCR æ–‡å­—è¯†åˆ«
    ocr:
      dashscope:
        enabled: true
        model: qwen-vl-ocr
        priority: 1
```

---

### 3. å›¾ç‰‡å¤„ç† 2.0 - MinIO + OCR + å¤šæ¨¡æ€å›æµ ğŸ–¼ï¸

#### 3.1 å®Œæ•´æµç¨‹

```
å›¾ç‰‡ä¸Šä¼  â†’ MinIOå­˜å‚¨ï¼ˆåŸå›¾+é¢„è§ˆï¼‰ â†’ DashScope OCR â†’ æ–‡å­—/ç»“æ„åŒ–JSON â†’ MongoDBå…ƒæ•°æ® â†’ ChatContext å¢å¼º
```

#### 3.2 æ ¸å¿ƒèƒ½åŠ›

- ğŸ“¤ **å¤šç§ä¸Šä¼ å½¢æ€**ï¼šè¡¨å•æ–‡ä»¶ã€Base64ã€æ‰¹é‡ç²˜è´´å…¨éƒ¨æ‰“é€šã€‚
- â˜ï¸ **MinIO åˆ†å±‚å­˜å‚¨**ï¼šæŒ‰æ—¥æœŸç”Ÿæˆå±‚çº§è·¯å¾„ï¼Œå‰ç«¯ç›´æ¥è®¿é—®å…¬ç½‘åœ°å€ã€‚
- ğŸ” **OCR å¼‚æ­¥å›æµ**ï¼šä¸Šä¼ å³æ—¶è¿”å› URLï¼ŒOCR ç»“æœç”±å¼‚æ­¥ä»»åŠ¡å›å¡« Mongoï¼Œé¿å…é˜»å¡ä½“éªŒã€‚
- ğŸ§  **Prompt è‡ªåŠ¨å¢å¼º**ï¼šåœ¨ `AIChatService.enhanceQueryWithOCR` ä¸­å°† OCR æ–‡æœ¬æ‹¼æ¥åˆ°ç”¨æˆ·æé—®ï¼Œå®ç°â€œçœ‹å›¾è¯´è¯â€ã€‚
- ğŸ§© **å¤šæ¨¡æ€æ¨¡å‹åˆ‡æ¢**ï¼šå­˜åœ¨å›¾ç‰‡å³è‡ªåŠ¨è·¯ç”±åˆ° `qwen-vl-ocr` ç­‰ Vision æ¨¡å‹ã€‚

#### 3.3 æŠ€æœ¯å®ç°

```yaml
minio:
  endpoint: http://localhost:9000
  bucket-name: images
```

```java

@Document(collection = "images")
public class Image {
    private String fileUrl;     // MinIO è®¿é—®åœ°å€
    private String ocrText;     // OCR å†…å®¹ï¼ˆå«ç»“æ„åŒ–JSONï¼‰
    private OcrStatus ocrStatus;// PENDING / SUCCESS / FAILED
    private String userId;
}
```

---

### 4. è”ç½‘ & MCP å·¥å…·ç”Ÿæ€ ğŸŒ

| åŠŸèƒ½                | æŠ€æœ¯                                            | äº®ç‚¹                        |
|-------------------|-----------------------------------------------|---------------------------|
| DashScope å…¨ç½‘æœç´¢    | `DashScopeChatOptions.withEnableSearch(true)` | æŒ‰éœ€å¼€å¯ï¼Œå®æ—¶å¼•ç”¨å¤–éƒ¨ä¿¡æ¯             |
| Weather å·¥å…·        | MCP + é«˜å¾·å¤©æ°”                                    | è‡ªåŠ¨åŸå¸‚åŒ¹é… + Function calling |
| Location å·¥å…·       | MCP + æµè§ˆå™¨å®šä½                                   | å‰ç«¯è‡ªåŠ¨æ•è·ç»çº¬åº¦ã€åç«¯å†™å…¥ Prompt     |
| Route Planning å·¥å…· | MCP + é«˜å¾·è·¯å¾„è§„åˆ’ 2.0                              | æ”¯æŒé©¾è½¦/æ­¥è¡Œ/éª‘è¡Œï¼Œè‡ªåŠ¨åœ°ç†ç¼–ç          |

#### 4.1 Route Planning MCP ğŸ§­

```mermaid
flowchart LR
UserQuery -- plan_route --> MCPTools --> RoutePlanningService --> AMapAPI --> Result
```

- `RoutePlanningTools#planRoute` è‡ªåŠ¨è§£æè·¯çº¿ç±»å‹ã€å®Œæˆåœ°å€â†’åæ ‡è½¬æ¢ã€‚
- `LocationService` è¯†åˆ«ç»çº¬åº¦å­—ç¬¦ä¸² vs. æ™®é€šåœ°å€ï¼Œå¿…è¦æ—¶è°ƒç”¨é«˜å¾·åœ°ç†ç¼–ç ã€‚
- æ”¯æŒé©¾è½¦/æ­¥è¡Œ/éª‘è¡Œä¸‰ç§ç­–ç•¥ï¼Œè¿”å›è·ç¦»ã€è€—æ—¶ã€é™è¡Œã€çº¢ç»¿ç¯ç­‰ä¿¡æ¯ã€‚
- å‰ç«¯è‹¥æ£€æµ‹åˆ°â€œæ€ä¹ˆå»/è·¯çº¿â€ç­‰å…³é”®è¯ï¼Œä¼šè¯·æ±‚æµè§ˆå™¨å®šä½å¹¶å°†ç»çº¬åº¦é€ä¼ åˆ° `streamChat`ï¼ŒPrompt ä¼šé™„å¸¦ `[æˆ‘çš„å½“å‰ä½ç½®åæ ‡ï¼šlng,lat]`
  ï¼Œæ¨¡å‹å¯ç›´æ¥è°ƒç”¨ MCP å·¥å…·ç”Ÿæˆè·¯çº¿æ–¹æ¡ˆã€‚

#### 3.2 è”ç½‘æœç´¢å·¥ä½œæµ

```java
DashScopeChatOptions options = DashScopeChatOptions.builder()
        .withEnableSearch(isWithEnableSearch)
        .build();
chatClient.

prompt(query).

options(options).

stream();
```

- ä»…å½“ç”¨æˆ·å¼€å¯â€œå…¨ç½‘æœç´¢â€å¼€å…³æ‰è§¦å‘ï¼ŒèŠ‚çœå¤–éƒ¨è°ƒç”¨é¢åº¦ã€‚
- æœç´¢ç»“æœä¼šç”± DashScope è‡ªåŠ¨æ‹¼æ¥å¼•ç”¨ï¼Œå‰ç«¯å¯ä»¥åŸæ ·å±•ç¤ºã€‚

---

### 5. åœ°ç†ä½ç½®ä½“éªŒä¼˜åŒ– ğŸ“

#### 5.1 å‰ç«¯èƒ½åŠ›

- ç›‘å¬â€œè·¯çº¿/å¯¼èˆª/æ€ä¹ˆå»â€ç­‰å…³é”®è¯è‡ªåŠ¨è§¦å‘å®šä½ã€‚
- è‹¥åªæåˆ°ç›®çš„åœ°ï¼Œä¼šæŠŠå®šä½åæ ‡æ”¾åœ¨ `locationParam` é‡Œï¼Œé¿å…æ‰“æ‰°ç”¨æˆ·ã€‚
- å®šä½å¤±è´¥ä¼šç»™å‡ºæµè§ˆå™¨æƒé™æŒ‡å¼•ã€‚

#### 5.2 åç«¯å¤„ç†

- `AIChatService.buildChatContext` å°†ç»çº¬åº¦è½¬æˆ `[æˆ‘çš„å½“å‰ä½ç½®åæ ‡ï¼šlng,lat]` æ³¨å…¥ Promptï¼Œæ–¹ä¾¿ MCP å·¥å…·æ¶ˆè´¹ã€‚
- Route Planning å·¥å…·ä¼˜å…ˆä½¿ç”¨æ˜¾å¼åæ ‡ï¼›è‹¥ç¼ºå¤±åˆ™å†æ¬¡è°ƒç”¨åœ°ç†ç¼–ç è¡¥å…¨ã€‚

---

### 6. ç”¨æˆ·ç”»åƒç³»ç»Ÿ ğŸ‘¤

#### 6.1 æ•°æ®æ¨¡å‹

**åŸºç¡€ç”»åƒ**ï¼ˆ`UserProfile`ï¼‰ï¼š

```java
{
        "userId":1,
        "gender":"ç”·",
        "age":28,
        "location":"ä¸Šæµ·",
        "occupation":101,        // èŒä¸šä»£ç ï¼šè½¯ä»¶å·¥ç¨‹å¸ˆ
        "hobbies":["ç¼–ç¨‹","æ—…æ¸¸","æ‘„å½±"]
        }
```

**ç»¼åˆæ ‡ç­¾**ï¼ˆ`UserTags`ï¼‰ï¼š

```java
{
        "userId":1,
        "tagName":"ç¼–ç¨‹",
        "baseWeight":1.0,        // æ¥è‡ªç”»åƒ
        "chatWeight":5.0,        // æ¥è‡ªèŠå¤©
        "fusionWeight":4.0,      // é‡å åŠ æƒ
        "totalWeight":10.0,      // æ€»æƒé‡
        "sourceType":"FUSION"    // PROFILE/CHAT/FUSION
        }
```

#### 4.2 æ ‡ç­¾ç”Ÿæˆ

**æ¥æºä¸€ï¼šç”¨æˆ·ç”»åƒ**

- èŒä¸š â†’ ç›¸å…³æ ‡ç­¾ï¼ˆç¨‹åºå‘˜ â†’ ç¼–ç¨‹ã€ç®—æ³•ã€æ¶æ„ï¼‰
- çˆ±å¥½ â†’ ç›´æ¥æ ‡ç­¾
- å¹´é¾„ â†’ äººç¾¤æ ‡ç­¾ï¼ˆå¹´è½»äººã€èŒåœºç²¾è‹±ï¼‰

**æ¥æºäºŒï¼šèŠå¤©è¡Œä¸º**

- AI åˆ†æå¯¹è¯å†…å®¹
- æå–å…³é”®ä¸»é¢˜è¯
- è‡ªåŠ¨ç”ŸæˆèŠå¤©æ ‡ç­¾

#### 4.3 æƒé‡è®¡ç®—è§„åˆ™ âš–ï¸

| åœºæ™¯            | æƒé‡è®¡ç®—                | è¯´æ˜           |
|---------------|---------------------|--------------|
| çº¯ç”»åƒæ ‡ç­¾         | baseWeight = 1.0    | æ¥è‡ªç”¨æˆ·èµ„æ–™       |
| çº¯èŠå¤©æ ‡ç­¾         | chatWeight = +1.0   | æ¯æ¬¡å¯¹è¯ç´¯åŠ        |
| é‡å æ ‡ç­¾ï¼ˆåŒæ ‡ç­¾å¿«é€Ÿä¸Šæµ®ï¼‰ | fusionWeight = +2.0 | ç”»åƒä¸èŠå¤©é‡å æ—¶é¢å¤–åŠ æƒ |
| å¹´é¾„æ ‡ç­¾          | baseWeight = 0.2    | é™ä½äººå£ç»Ÿè®¡æ ‡ç­¾å½±å“   |

**ä¸¾ä¾‹**ï¼š

```
ç¨‹åºå‘˜ç”¨æˆ·èŠ"ç¼–ç¨‹" â†’ baseWeight(1) + chatWeight(1) + fusionWeight(2) = 4
éç¨‹åºå‘˜ç”¨æˆ·èŠ"ç¼–ç¨‹" â†’ chatWeight(1) = 1
ç¨‹åºå‘˜ç”¨æˆ·èŠ"ç¾é£Ÿ" â†’ chatWeight(1) = 1
```

---

### 7. æ ‡ç­¾è¡°å‡æœºåˆ¶ - ä¿æŒæ—¶æ•ˆæ€§ â±ï¸

#### 7.1 åŠå› å­è¡°å‡

**å®šæ—¶ä»»åŠ¡**ï¼ˆæ¯æœˆ1å·å‡Œæ™¨2ç‚¹ï¼‰ï¼š

```java

@Scheduled(cron = "0 0 2 1 * ?")
public void monthlyWeightDecay() {
    for (UserTags tag : allTags) {
        tag.setBaseWeight(tag.getBaseWeight() * 0.5);
        tag.setChatWeight(tag.getChatWeight() * 0.5);
        tag.setFusionWeight(tag.getFusionWeight() * 0.5);
    }
}
```

#### 5.2 è¡°å‡æ•ˆæœ

| æ—¶é—´   | åˆå§‹æƒé‡        | 1ä¸ªæœˆå      | 2ä¸ªæœˆå | 3ä¸ªæœˆå |
|------|-------------|-----------|------|------|
| çƒ­ç‚¹æ ‡ç­¾ | 10.0        | 5.0       | 2.5  | 1.25 |
| æŒç»­è®¨è®º | 10.0 â†’ 11.0 | 5.5 â†’ 6.5 | 3.25 | -    |

**è®¾è®¡ç›®æ ‡**ï¼š

- âœ… è¿‡æœŸçƒ­ç‚¹å¿«é€Ÿä¸‹æµ®ï¼ˆåŠè¡°æœŸ1ä¸ªæœˆï¼‰
- âœ… æŒç»­æ´»è·ƒæ ‡ç­¾ä¿æŒé«˜æƒé‡
- âœ… é¿å…å†å²æ•°æ®æ±¡æŸ“æ¨èç»“æœ

---

### 8. é¦–é¡µä¸ªæ€§æ¨è ğŸ¯

#### 8.1 å·¥ä½œæµç¨‹

```
ç”¨æˆ·ID â†’ è·å–çƒ­é—¨æ ‡ç­¾ï¼ˆTop 5ï¼‰â†’ AIç”Ÿæˆæ¨èæé—® â†’ Redisç¼“å­˜24å°æ—¶
```

#### 8.2 æ ¸å¿ƒå®ç°

```java
public Map<String, Object> generatePersonalizedRecommendations(Long userId, int limit) {
    // 1. è·å–ç”¨æˆ·çƒ­é—¨æ ‡ç­¾
    List<UserTags> hotTags = userProfileService.getHotTags(userId, limit);

    // 2. æ£€æŸ¥Redisç¼“å­˜
    String cacheKey = "recommendation:user:" + userId + ":" + weightKey;
    Map<String, Object> cached = redissonClient.getBucket(cacheKey).get();
    if (cached != null) return cached;

    // 3. AIç”Ÿæˆæ¨èæé—®
    String prompt = String.format("""
            æ ¹æ®ä»¥ä¸‹ç”¨æˆ·å…´è¶£æ ‡ç­¾ï¼Œä¸ºæ¯ä¸ªæ ‡ç­¾ç”Ÿæˆä¸€ä¸ªå¸å¼•äººçš„ã€ä¸ªæ€§åŒ–çš„æ¨èé—®é¢˜ã€‚
            
            ç”¨æˆ·å…´è¶£æ ‡ç­¾ï¼š%s
            
            ä¾‹å¦‚ï¼š
            æ—…æ¸¸ -> 3å¤©äº‘å—æ—¥ç…§é‡‘å±±å…¨è·¯ç¨‹æ”»ç•¥Getï¼
            ç¼–ç¨‹ -> è®ºMESIå—…æ¢æœºåˆ¶çš„ä½œç”¨å’ŒåŸç†
            """, tagNames);

    List<String> questions = aiChatService.simpleChat(prompt);

    // 4. ç¼“å­˜24å°æ—¶
    redissonClient.getBucket(cacheKey).set(result, 24, TimeUnit.HOURS);

    return result;
}
```

#### 6.3 ç¼“å­˜ç­–ç•¥

**ç¼“å­˜Keyè®¾è®¡**ï¼š

```
recommendation:user:{userId}:{weightSum/10}
```

**ç‰¹ç‚¹**ï¼š

- âœ… æƒé‡å˜åŒ–ä¸å¤§æ—¶å¤ç”¨ç¼“å­˜ï¼ˆä»¥10ä¸ºåŒºé—´ï¼‰
- âœ… å‡å°‘AIè°ƒç”¨æ¬¡æ•°
- âœ… 24å°æ—¶è¿‡æœŸï¼Œä¿è¯æ–°é²œåº¦

---

### 9. å¯¹è¯ä¸ªæ€§å¼•å¯¼ ğŸ’¬

#### 9.1 æ™ºèƒ½è¿½é—®

**åœ¨å¯¹è¯ç»“æŸæ—¶è‡ªåŠ¨æ¨èç›¸å…³è¯é¢˜**ï¼š

```java
// å¼‚æ­¥ç”Ÿæˆä¸ªæ€§åŒ–æ¨è
CompletableFuture<List<String>> recommendationsFuture =
        CompletableFuture.supplyAsync(() ->
                recommendationTools.suggestFollowUpTopics(query, userId)
        );

// å¯¹è¯å®Œæˆåè¿½åŠ æ¨è
Flux<String> mainResponse = chatClient.prompt(query).stream().content()
        .doOnComplete(() -> {
            List<String> recommendations = recommendationsFuture.get(500, TimeUnit.MILLISECONDS);
            String formatted = formatRecommendations(recommendations);
            // è¿½åŠ åˆ°å“åº”æµ
        });
```

#### 7.2 æ¨èæ ¼å¼

**åŸå§‹AIå›ç­”**ï¼š

```
Spring AI æ˜¯ä¸€ä¸ªç”¨äºæ„å»º AI åº”ç”¨çš„æ¡†æ¶...
```

**è¿½åŠ ä¸ªæ€§å¼•å¯¼**ï¼š

```
Spring AI æ˜¯ä¸€ä¸ªç”¨äºæ„å»º AI åº”ç”¨çš„æ¡†æ¶...

è¦ä¸æˆ‘ä»¬èŠç‚¹å…¶ä»–çš„ï¼Ÿæ¯”å¦‚ Spring Boot çš„é«˜çº§ç‰¹æ€§ï¼Ÿã€å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Ÿæˆ–è€… Docker å®¹å™¨åŒ–éƒ¨ç½²ï¼Ÿ
```

#### 7.3 æ¨èç®—æ³•

1. **è·å–ç”¨æˆ·çƒ­é—¨æ ‡ç­¾**
2. **AIåˆ†æå½“å‰è¯é¢˜ç›¸å…³æ ‡ç­¾**
3. **ç”Ÿæˆè‡ªç„¶çš„åç»­å»ºè®®**
4. **æ ¼å¼åŒ–ä¸ºå‹å¥½å¯¹è¯**

**ç¤ºä¾‹æç¤ºè¯**ï¼š

```
åŸºäºç”¨æˆ·å½“å‰è¯é¢˜"Spring AI"å’Œå…´è¶£æ ‡ç­¾"å¾®æœåŠ¡"ï¼Œç”Ÿæˆä¸€ä¸ªè‡ªç„¶çš„åç»­å»ºè®®é—®é¢˜ã€‚

è¦æ±‚ï¼š
1. é—®é¢˜è¦è‡ªç„¶ï¼Œåƒæœ‹å‹é—´çš„å¯¹è¯
2. è¦ä½“ç°æ ‡ç­¾ä¸å½“å‰è¯é¢˜çš„å…³è”
3. é—®é¢˜é•¿åº¦æ§åˆ¶åœ¨20-40ä¸ªå­—
```

---

### 10. AI å¯¹è¯è°ƒåº¦

#### 10.1 éæµå¼å¯¹è¯

- **ç®€å•å¯¹è¯**ï¼šä¸€æ¬¡æ€§è¿”å›å®Œæ•´å“åº”
- é€‚ç”¨åœºæ™¯ï¼šç®€çŸ­é—®ç­”ã€å¿«é€ŸæŸ¥è¯¢
- API ç¤ºä¾‹ï¼š
  ```java
  @GetMapping("/simple/chat")
  public String simpleChat(@RequestParam String query) {
      return aiChatService.simpleChat(query);
  }
  ```

#### 8.2 æµå¼å¯¹è¯ï¼ˆSSEï¼‰

- **å®æ—¶æµå¼å“åº”**ï¼šé€å­—è¿”å›ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- åŸºäº Reactor å“åº”å¼ç¼–ç¨‹
- è‡ªåŠ¨ä¿å­˜å¯¹è¯å†å²åˆ° MongoDB
- API ç¤ºä¾‹ï¼š
  ```java
  @GetMapping("/simple/streamChat")
  public Flux<String> streamChat(
      @RequestParam String query, 
      @RequestParam String sessionId
  ) {
      return aiChatService.streamChat(query, sessionId);
  }
  ```

**æŠ€æœ¯å®ç°äº®ç‚¹**ï¼š

```java
Flux<String> contentFlux = chatClient.prompt(query)
        .advisors(a -> a.param(ChatMemory.CONVERSATION_ID, sessionId))
        .stream().content();
```

---

### 11. è®°å¿†ä¸ä¸Šä¸‹æ–‡ç®¡ç†

#### 11.1 çŸ­æœŸè®°å¿†ï¼ˆRedisï¼‰

- **åŸºäº Redis çš„æ»‘åŠ¨çª—å£è®°å¿†**
- è‡ªåŠ¨ä¿ç•™æœ€è¿‘ 20 è½®å¯¹è¯
- è·¨è¯·æ±‚æŒä¹…åŒ–ï¼Œæ”¯æŒä¼šè¯æ¢å¤

**æ ¸å¿ƒé…ç½®**ï¼š

```java

@Bean
public MessageWindowChatMemory chatMemory(
        RedissonRedisChatMemoryRepository repository
) {
    return MessageWindowChatMemory.builder()
            .chatMemoryRepository(repository)
            .maxMessages(20)  // ä¿ç•™æœ€è¿‘20æ¡æ¶ˆæ¯
            .build();
}
```

#### 9.2 é•¿æœŸè®°å¿†ï¼ˆMongoDBï¼‰

- **å®Œæ•´å¯¹è¯å†å²å½’æ¡£**
- æ”¯æŒæŒ‰ä¼šè¯/ç”¨æˆ·æ£€ç´¢
- å­˜å‚¨ RAG å¢å¼ºæ ‡è®°

**æ•°æ®æ¨¡å‹**ï¼š

```java

@Document(collection = "chat_messages")
public class ChatMessage {
    private String sessionId;      // ä¼šè¯ID
    private Long userId;           // ç”¨æˆ·ID
    private MessageType messageType; // USER/ASSISTANT
    private String content;        // æ¶ˆæ¯å†…å®¹
    private Boolean isRagEnhanced; // æ˜¯å¦RAGå¢å¼º
    private LocalDateTime createdAt;
}
```

#### 11.2 ä¼šè¯ç®¡ç†

- **è‡ªåŠ¨ç”Ÿæˆä¼šè¯æ ‡é¢˜**ï¼šä½¿ç”¨ LLM æ€»ç»“å¯¹è¯ä¸»é¢˜
- **ä¼šè¯åˆ—è¡¨ç®¡ç†**ï¼šæ”¯æŒå¤šä¼šè¯å¹¶å‘
- **æ¶ˆæ¯è®¡æ•°ç»Ÿè®¡**ï¼šè¿½è¸ªä¼šè¯æ´»è·ƒåº¦

---

### 12. LLM å¢å¼ºï¼ˆRAGï¼‰

#### 12.1 RAG å·¥ä½œæµç¨‹

```
ç”¨æˆ·æé—®
    â†“
å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢ï¼ˆPgVectorï¼‰
    â†“
æ‰¾åˆ°ç›¸å…³æ–‡æ¡£ç‰‡æ®µ
    â†“
æ„å»ºå¢å¼ºæç¤ºè¯
    â†“
LLM ç”Ÿæˆå›ç­”
    â†“
æ ‡è®°ä¸º RAG å¢å¼ºå›ç­”
```

#### 10.2 æ ¸å¿ƒå®ç°

**ç›¸ä¼¼åº¦æ£€ç´¢**ï¼š

```java
public Flux<String> ragStreamChat(String query, String sessionId) {
    // 1. ä»å‘é‡åº“æ£€ç´¢ç›¸å…³æ–‡æ¡£
    List<Document> relevantDocs = vectorStore.similaritySearch(query);

    // 2. æ„å»ºå¢å¼ºæç¤ºè¯
    String enhancedPrompt = buildRagPrompt(query, relevantDocs);

    // 3. æµå¼è¿”å›å¢å¼ºå›ç­”
    return streamChat(enhancedPrompt, sessionId, true, query);
}
```

**æç¤ºè¯å¢å¼ºæ¨¡æ¿**ï¼š

```java
private String buildRagPrompt(String userQuery, List<Document> docs) {
    String context = docs.stream()
            .map(Document::getText)
            .collect(Collectors.joining("\n\n"));

    return String.format("""
            åŸºäºä»¥ä¸‹å‚è€ƒæ–‡æ¡£å›ç­”ç”¨æˆ·é—®é¢˜ã€‚
            å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·åŸºäºä½ çš„çŸ¥è¯†å›ç­”ï¼Œå¹¶è¯´æ˜ä¿¡æ¯æ¥æºã€‚
            
            å‚è€ƒæ–‡æ¡£ï¼š
            %s
            
            ç”¨æˆ·é—®é¢˜ï¼š%s
            
            è¯·æä¾›å‡†ç¡®ã€æœ‰ç”¨çš„å›ç­”ï¼š
            """, context, userQuery);
}
```

---

### 13. å‘é‡æ•°æ®åº“ï¼ˆPgVectorï¼‰

#### 13.1 æŠ€æœ¯é€‰å‹

- **PostgreSQL + pgvector æ‰©å±•**
- æ”¯æŒé«˜ç»´å‘é‡å­˜å‚¨ä¸ç›¸ä¼¼åº¦æœç´¢
- ä¸å…³ç³»å‹æ•°æ®æ— ç¼é›†æˆ

#### 13.2 æ–‡æ¡£å¤„ç†æµç¨‹

```
æ–‡æ¡£ä¸Šä¼ 
    â†“
æ ¼å¼è¯†åˆ«ï¼ˆPDF/Word/PPT/Markdown/TXTï¼‰
    â†“
å†…å®¹æå–ï¼ˆApache Tikaï¼‰
    â†“
è¯­ä¹‰åŒ–åˆ†å—ï¼ˆä¿ç•™ä¸Šä¸‹æ–‡ï¼‰
    â†“
å‘é‡åŒ–ï¼ˆEmbedding Modelï¼‰
    â†“
å­˜å‚¨åˆ° PgVector
```

#### 11.3 æ™ºèƒ½æ–‡æœ¬åˆ†å—

**è¯­ä¹‰åŒ–åˆ†å—ç­–ç•¥**ï¼š

- æŒ‰æ®µè½è¾¹ç•Œåˆ†å‰²ï¼ˆä¿æŒè¯­ä¹‰å®Œæ•´ï¼‰
- åŠ¨æ€å—å¤§å°ï¼šçŸ­æ–‡æ¡£ 500 å­—ç¬¦ï¼Œé•¿æ–‡æ¡£ 1000 å­—ç¬¦
- å—é‡å ï¼š200 å­—ç¬¦é‡å ï¼Œé¿å…è¯­ä¹‰æ–­è£‚
- ä¸­æ–‡ä¼˜åŒ–ï¼šæŒ‰å¥å­æ ‡ç‚¹ç¬¦å·æ™ºèƒ½åˆ†å‰²

```java
private List<String> chunkTextBySemantic(
        String text,
        int maxChunkSize,
        int overlap
) {
    // 1. æŒ‰æ®µè½åˆ†å‰²
    String[] paragraphs = text.split("\n\\s*\n");

    // 2. ç»„è£…å—ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§
    // 3. å¤„ç†è¶…å¤§æ®µè½ï¼ˆæŒ‰å¥å­åˆ†å‰²ï¼‰
    // 4. æ·»åŠ é‡å æ–‡æœ¬ï¼Œä¿æŒä¸Šä¸‹æ–‡è¿ç»­æ€§

    return chunks;
}
```

#### 11.4 æ”¯æŒçš„æ–‡æ¡£æ ¼å¼

| æ ¼å¼         | æ‰©å±•å         | è§£æå™¨           |
|------------|-------------|---------------|
| PDF        | .pdf        | Apache PDFBox |
| Word       | .doc, .docx | Apache POI    |
| PowerPoint | .ppt, .pptx | Apache POI    |
| Markdown   | .md         | Tika          |
| HTML       | .html, .htm | Tika          |
| çº¯æ–‡æœ¬        | .txt, .csv  | Tika          |

---

### 14. AI æ¨¡å‹é…ç½®

#### 14.1 é»˜è®¤æ¨¡å‹é…ç½®

```java

@Bean
public ChatClient chatClient(ChatClient.Builder builder) {
    return builder
            .defaultSystem("ä½ æ˜¯ä¸€ä¸ªåšå­¦çš„æ™ºèƒ½èŠå¤©åŠ©æ‰‹ï¼Œè¯·æ ¹æ®ç”¨æˆ·æé—®å›ç­”ï¼")
            .defaultAdvisors(
                    new SimpleLoggerAdvisor(),  // æ—¥å¿—è®°å½•
                    MessageChatMemoryAdvisor.builder(memory).build()  // è®°å¿†ç®¡ç†
            )
            .defaultOptions(DashScopeChatOptions.builder()
                    .withModel("qwen-turbo")    // é€šä¹‰åƒé—® Turbo
                    .withTopP(0.7)              // å¤šæ ·æ€§æ§åˆ¶
                    .build())
            .build();
}
```

#### 14.2 å¯è°ƒå‚æ•°

- **æ¨¡å‹é€‰æ‹©**ï¼šqwen-turbo / qwen-plus / qwen-max
- **æ¸©åº¦ï¼ˆTemperatureï¼‰**ï¼šæ§åˆ¶å›ç­”éšæœºæ€§
- **TopP**ï¼šæ§åˆ¶é‡‡æ ·èŒƒå›´
- **MaxTokens**ï¼šæœ€å¤§å“åº”é•¿åº¦

---

### 15. å®‰å…¨è®¤è¯ï¼ˆJWTï¼‰

#### 15.1 æ¶æ„ç‰¹ç‚¹

- **æ— çŠ¶æ€è®¤è¯**ï¼šè®¤è¯ä¿¡æ¯å­˜å‚¨åœ¨ JWT ä¸­
- **ç»Ÿä¸€å…¥å£**ï¼šcloud-auth å¯¹å¤–æä¾›ç»Ÿä¸€ç™»å½•å…¥å£ï¼ˆ/auth/loginï¼‰ï¼Œå†…éƒ¨é€šè¿‡ Feign è½¬å‘åˆ° cloud-system å®Œæˆè®¤è¯
- **æƒé™å†…ç½®**ï¼šJWT å†…å†™å…¥ userId + authoritiesï¼ˆè§’è‰²/æƒé™ï¼‰ï¼Œå„æœåŠ¡æ— éœ€æ¯æ¬¡è¯·æ±‚æŸ¥åº“å³å¯å®Œæˆé‰´æƒ
- **è·¨æ¨¡å—å…±äº«**ï¼šç»Ÿä¸€çš„ JWT Tokenï¼Œæ‰€æœ‰å¾®æœåŠ¡å¤ç”¨ cloud-common-security çš„è¿‡æ»¤å™¨é“¾

#### 15.2 å·¥ä½œæµç¨‹

**ç™»å½•ï¼ˆç»Ÿä¸€å…¥å£ï¼‰**ï¼š

```
å®¢æˆ·ç«¯ â†’ cloud-auth:/auth/login
    â†“
cloud-auth â†’ Feign è½¬å‘ â†’ cloud-system:/api/auth/login
    â†“
cloud-system æ ¡éªŒç”¨æˆ·åå¯†ç  â†’ ç”Ÿæˆ JWTï¼ˆå« userId + authoritiesï¼‰â†’ è¿”å›ç»™å®¢æˆ·ç«¯
```

**èµ„æºè®¿é—®ï¼ˆå„ä¸šåŠ¡æœåŠ¡é€šç”¨ï¼‰**ï¼š

```
è¯·æ±‚å¸¦ Token â†’ AuthTokenFilter éªŒè¯ç­¾å
    â†“
ä» JWT è§£æ userId/username/authorities â†’ æ„å»º Authentication
    â†“
Spring Security åŸºäº authorities æ‰§è¡Œ URL é‰´æƒ / @PreAuthorize
```

è¯¦ç»†æ¶æ„è¯·å‚è€ƒï¼š[SECURITY-ARCHITECTURE.md](./SECURITY-ARCHITECTURE.md)

---

## ğŸ“Š æ•°æ®æµè½¬

### å®Œæ•´å¯¹è¯æµç¨‹ï¼ˆå«ä¸ªæ€§æ¨èï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·è¯·æ±‚  â”‚ (å¯é€‰ï¼šæºå¸¦å›¾ç‰‡URL)
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthTokenFilter â”‚  éªŒè¯ JWTï¼Œè§£æç”¨æˆ·ä¿¡æ¯
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AiChatController â”‚  æ¥æ”¶è¯·æ±‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIChatService   â”‚  ä¸šåŠ¡é€»è¾‘
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ æœ‰å›¾ç‰‡ï¼Ÿ       â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   æ˜¯ â†“      â†“ å¦
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚æå–OCRæ–‡å­—â”‚  â”‚
â”‚å¢å¼ºæé—®   â”‚  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
      â†“       â†“
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
  â”‚ æ¨¡å‹é€‰æ‹©å™¨      â”‚  æ ¹æ®ä¸Šä¸‹æ–‡é€‰æ‹©æ¨¡å‹
  â”‚ (SPIæœºåˆ¶)      â”‚  æœ‰å›¾â†’Visionï¼Œæ— å›¾â†’Turbo
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
  â”‚ RAG? â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”˜
  æ˜¯ â†“     â†“ å¦
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚å‘é‡æ£€ç´¢  â”‚  â”‚ ç›´æ¥å¯¹è¯   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â†“            â†“
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
  â”‚  ChatClient è°ƒç”¨   â”‚  â†’ é€šä¹‰åƒé—® API (è”ç½‘æœç´¢å¯é€‰)
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  å¹¶è¡Œæ‰§è¡Œ â†“
  â”‚  Flux<String>      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  (å“åº”å¼æµ)         â”‚  â”‚ å¼‚æ­¥ç”Ÿæˆä¸ªæ€§æ¨è      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ (CompletableFuture)  â”‚
           â†“               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â†“
  â”‚  æµå¼è¿”å›ç»™ç”¨æˆ·     â”‚  â† è¿½åŠ æ¨èå†…å®¹
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ä¿å­˜åˆ° MongoDB    â”‚  å®Œæ•´å¯¹è¯å†å²ï¼ˆå«å›¾ç‰‡URLï¼‰
  â”‚  æ›´æ–° Redis è®°å¿†   â”‚  æœ€è¿‘20è½®å¯¹è¯
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  å¼‚æ­¥åˆ†æå¯¹è¯      â”‚  æå–æ ‡ç­¾ â†’ æ›´æ–°ç”¨æˆ·ç”»åƒ
  â”‚  æ›´æ–°æ ‡ç­¾æƒé‡      â”‚  é‡å æ ‡ç­¾ +2ï¼Œæ™®é€šæ ‡ç­¾ +1
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ªæ€§æ¨èæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¦–é¡µåŠ è½½      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è·å–ç”¨æˆ·çƒ­é—¨æ ‡ç­¾  â”‚  æŒ‰totalWeightæ’åºï¼ŒTop 5
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥Redisç¼“å­˜     â”‚  key: recommendation:user:{userId}:{weight}
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   å‘½ä¸­ â†“      â†“ æœªå‘½ä¸­
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚è¿”å›ç¼“å­˜  â”‚  â”‚ AIç”Ÿæˆæ¨èæé—®   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ (åŸºäºæ ‡ç­¾)       â”‚
             â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ å­˜å…¥Redisç¼“å­˜    â”‚  è¿‡æœŸæ—¶é—´24å°æ—¶
             â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ è¿”å›æ¨èåˆ—è¡¨     â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ‡ç­¾æƒé‡æ›´æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è¯å®Œæˆ      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIåˆ†æå¯¹è¯å†…å®¹    â”‚  æå–å…³é”®ä¸»é¢˜è¯
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”ŸæˆèŠå¤©æ ‡ç­¾åˆ—è¡¨  â”‚  ["ç¼–ç¨‹", "Spring AI", "å¾®æœåŠ¡"]
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŸ¥è¯¢ç°æœ‰æ ‡ç­¾      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
   â”‚ æ ‡ç­¾å­˜åœ¨ï¼Ÿâ”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    æ˜¯ â†“      â†“ å¦
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥é‡å   â”‚  â”‚ åˆ›å»ºæ–°æ ‡ç­¾   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚ chatWeight=1â”‚
      â†“       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
  â”‚ é‡å ï¼Ÿâ”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”˜
   æ˜¯ â†“    â†“ å¦
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚fusionWeight â”‚  â”‚chatWeight +1â”‚
â”‚+2 (å¿«é€Ÿä¸Šæµ®)â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚sourceType   â”‚
â”‚= FUSION     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¡ç®—totalWeight   â”‚  base + chat + fusion
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Java 17+
- Maven 3.8+
- PostgreSQL 14+ (with pgvector extension)
- Redis 6+
- MongoDB 4.4+

### 2. æ•°æ®åº“å‡†å¤‡

**PostgreSQL**ï¼š

```sql
-- å®‰è£… pgvector æ‰©å±•
CREATE
EXTENSION IF NOT EXISTS vector;

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE cms;
```

**Redis**ï¼š

```bash
# å¯åŠ¨ Redisï¼ˆé»˜è®¤ç«¯å£ 6379ï¼‰
redis-server
```

**MongoDB**ï¼š

```bash
# å¯åŠ¨ MongoDBï¼ˆé»˜è®¤ç«¯å£ 27017ï¼‰
mongod --dbpath /your/data/path
```

### 3. é…ç½®æ–‡ä»¶

ä¿®æ”¹ `cloud-modules/cloud-ai-chat/src/main/resources/application.yml`ï¼š

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/cms
    username: your_username
    password: your_password

  data:
    redis:
      host: localhost
      port: 6379
      password: your_redis_password

    mongodb:
      uri: mongodb://root:password@localhost:27017/aiChat?authSource=admin

  ai:
    dashscope:
      api-key: your_dashscope_api_key  # é˜¿é‡Œäº‘é€šä¹‰åƒé—® API Key

# MinIO å¯¹è±¡å­˜å‚¨é…ç½®
minio:
  endpoint: http://localhost:9000
  access-key: minioadmin
  secret-key: minioadmin
  bucket-name: images

# é«˜å¾·åœ°å›¾APIï¼ˆå¤©æ°”æŸ¥è¯¢ï¼‰
map:
  api-key: your_amap_api_key
```

### 4. å¯åŠ¨åº”ç”¨

```bash
# 1. æ„å»ºé¡¹ç›®
mvn clean package

# 2. å¯åŠ¨ AI èŠå¤©æœåŠ¡
cd cloud-modules/cloud-ai-chat
mvn spring-boot:run

# 3. è®¿é—®æœåŠ¡
# ç«¯å£ï¼š18080
```

### 5. API æµ‹è¯•

#### åŸºç¡€å¯¹è¯

**ç®€å•å¯¹è¯**ï¼š

```bash
curl "http://localhost:18080/api/aiChat/simple/chat?query=ä½ å¥½"
```

**æµå¼å¯¹è¯**ï¼š

```bash
curl "http://localhost:18080/api/aiChat/simple/streamChat?query=ä»‹ç»ä¸€ä¸‹Spring AI&sessionId=test-session-001"
```

**è”ç½‘æœç´¢å¯¹è¯**ï¼š

```bash
curl "http://localhost:18080/api/aiChat/simple/streamChat?query=2025å¹´æœ€æ–°çš„AIæŠ€æœ¯è¶‹åŠ¿&sessionId=test-001&isWithEnableSearch=true" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

#### RAG æ–‡æ¡£å¯¹è¯

```bash
# 1. ä¸Šä¼ æ–‡æ¡£
curl -X POST "http://localhost:18080/api/document/upload" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "file=@/path/to/your/document.pdf" \
  -F "title=Spring AI æ–‡æ¡£" \
  -F "description=Spring AI å®˜æ–¹æ–‡æ¡£"

# 2. RAG å¯¹è¯
curl "http://localhost:18080/api/aiChat/rag/streamChat?query=Spring AI æ˜¯ä»€ä¹ˆ&sessionId=test-session-001" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

#### å›¾ç‰‡å¤„ç†

**ä¸Šä¼ å›¾ç‰‡**ï¼š

```bash
curl -X POST "http://localhost:18080/api/images/upload" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "file=@/path/to/image.jpg" \
  -F "userId=1"
```

**å›¾æ–‡æ··åˆå¯¹è¯**ï¼š

```bash
curl -X POST "http://localhost:18080/api/aiChat/simple/streamChat" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "è¿™å¼ å›¾ç‰‡æ˜¯ä»€ä¹ˆï¼Ÿ",
    "sessionId": "test-001",
    "imageUrlList": ["http://localhost:18080/api/images/2025/01/27/xxx.jpg"]
  }'
```

#### ç”¨æˆ·ç”»åƒ

**åˆ›å»ºç”¨æˆ·ç”»åƒ**ï¼š

```bash
curl -X POST "http://localhost:18080/api/profile" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "userId": 1,
    "gender": "ç”·",
    "age": 28,
    "location": "ä¸Šæµ·",
    "occupation": 101,
    "hobbies": ["ç¼–ç¨‹", "æ—…æ¸¸", "æ‘„å½±"]
  }'
```

**è·å–ç”¨æˆ·ç”»åƒ**ï¼š

```bash
curl "http://localhost:18080/api/profile/1" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

#### ä¸ªæ€§æ¨è

**è·å–é¦–é¡µæ¨è**ï¼š

```bash
curl "http://localhost:18080/api/recommendations/personalized?limit=5" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

**è·å–ç”¨æˆ·å…´è¶£åˆ†æ**ï¼š

```bash
curl "http://localhost:18080/api/recommendations/interests/1" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

---

## ğŸ“ å­¦ä¹ è¦ç‚¹

### 1. Spring AI æ ¸å¿ƒæ¦‚å¿µ

- **ChatClient**ï¼šç»Ÿä¸€çš„èŠå¤©å®¢æˆ·ç«¯æŠ½è±¡
- **Advisor**ï¼šå¢å¼ºå™¨ï¼ˆè®°å¿†ã€æ—¥å¿—ã€RAGç­‰ï¼‰
- **VectorStore**ï¼šå‘é‡å­˜å‚¨æŠ½è±¡
- **DocumentReader**ï¼šæ–‡æ¡£è¯»å–å™¨
- **EmbeddingModel**ï¼šå‘é‡åŒ–æ¨¡å‹
- **Tool Calling**ï¼šå‡½æ•°è°ƒç”¨æœºåˆ¶ï¼ˆMCPï¼‰

### 2. SPI è®¾è®¡æ¨¡å¼

- **æœåŠ¡æä¾›è€…æ¥å£**ï¼šå®šä¹‰ç»Ÿä¸€çš„æ¨¡å‹æä¾›è€…æ¥å£
- **è‡ªåŠ¨å‘ç°æœºåˆ¶**ï¼šSpring å®¹å™¨è‡ªåŠ¨æ‰«æå®ç°ç±»
- **ç­–ç•¥æ¨¡å¼**ï¼šæ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½é€‰æ‹©æ¨¡å‹
- **æ‰©å±•æ€§è®¾è®¡**ï¼šæ–°å¢æ¨¡å‹é›¶é…ç½®ï¼Œåªéœ€å®ç°æ¥å£

### 3. RAG æœ€ä½³å®è·µ

- âœ… æ–‡æœ¬åˆ†å—ä¿æŒè¯­ä¹‰å®Œæ•´æ€§
- âœ… åˆç†çš„å—å¤§å°å’Œé‡å 
- âœ… ä½¿ç”¨å…ƒæ•°æ®è¿‡æ»¤
- âœ… ç›¸ä¼¼åº¦é˜ˆå€¼è°ƒä¼˜
- âœ… ä¸Šä¸‹æ–‡é•¿åº¦æ§åˆ¶

### 4. è®°å¿†ç®¡ç†ç­–ç•¥

- **çŸ­æœŸè®°å¿†**ï¼šé«˜é¢‘è®¿é—®ï¼Œä½¿ç”¨ Redis
- **é•¿æœŸè®°å¿†**ï¼šå½’æ¡£å­˜å‚¨ï¼Œä½¿ç”¨ MongoDB
- **æ»‘åŠ¨çª—å£**ï¼šé™åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦ï¼Œæ§åˆ¶ Token æ¶ˆè€—
- **ä¼šè¯éš”ç¦»**ï¼šä¸åŒä¼šè¯ç‹¬ç«‹è®°å¿†

### 5. ç”¨æˆ·ç”»åƒä¸æ¨è

- **æ ‡ç­¾èåˆ**ï¼šç”»åƒæ ‡ç­¾ + èŠå¤©æ ‡ç­¾ = ç»¼åˆæ ‡ç­¾
- **æƒé‡ç­–ç•¥**ï¼šé‡å æ ‡ç­¾å¿«é€Ÿä¸Šæµ®ï¼ˆÃ—2ï¼‰
- **æ—¶æ•ˆæ€§ç®¡ç†**ï¼šåŠå› å­è¡°å‡ï¼ˆæ¯æœˆÃ—0.5ï¼‰
- **AIé©±åŠ¨æ¨è**ï¼šåŸºäºæ ‡ç­¾ç”Ÿæˆä¸ªæ€§åŒ–å†…å®¹
- **ç¼“å­˜ä¼˜åŒ–**ï¼šRedisç¼“å­˜24å°æ—¶ï¼Œå‡å°‘AIè°ƒç”¨

### 6. æµå¼å“åº”ä¼˜åŒ–

- ä½¿ç”¨å“åº”å¼ç¼–ç¨‹ï¼ˆReactorï¼‰
- å¼‚æ­¥å¤„ç†ï¼ˆCompletableFutureï¼‰
- åŠæ—¶é‡Šæ”¾èµ„æº
- é”™è¯¯å¤„ç†ä¸é™çº§
- èƒŒå‹ï¼ˆBackpressureï¼‰ç®¡ç†

### 7. å¤šæ¨¡æ€å¤„ç†

- **å›¾ç‰‡å­˜å‚¨**ï¼šMinIO å¯¹è±¡å­˜å‚¨
- **OCRè¯†åˆ«**ï¼šDashScope æ–‡å­—æå–
- **æ¨¡å‹åˆ‡æ¢**ï¼šè‡ªåŠ¨é€‰æ‹© Vision æ¨¡å‹
- **å¯¹è¯å¢å¼º**ï¼šOCRæ–‡å­—å¢å¼ºç”¨æˆ·æé—®

---

## ğŸ“ æŠ€æœ¯äº®ç‚¹

### 1. æ¶æ„è®¾è®¡äº®ç‚¹ ğŸ—ï¸

- **æ¨¡å—åŒ–æ‹†åˆ†**ï¼šæå‰è§„åˆ’å¾®æœåŠ¡æ¶æ„ï¼ŒæŒ‰ä¸šåŠ¡åŸŸæ‹†åˆ†
- **SPI æ‰©å±•æœºåˆ¶**ï¼šé›¶é…ç½®æ¥å…¥æ–°æ¨¡å‹ï¼Œæ”¯æŒçƒ­æ’æ‹”
- **MCP Schema ç»Ÿä¸€**ï¼šå·¥å…·æ ‡å‡†åŒ–ç®¡ç†ï¼Œé™ä½æ¥å…¥æˆæœ¬
- **é…ç½®é©±åŠ¨**ï¼šYAML åŠ¨æ€é…ç½®ï¼Œæ”¯æŒè¿è¡Œæ—¶åˆ‡æ¢

### 2. AI èƒ½åŠ›åˆ›æ–° ğŸ§ 

- **Prompt å·¥ç¨‹**ï¼šä¸‰å±‚ Promptï¼ˆç³»ç»Ÿ+ä¸Šä¸‹æ–‡+ä»»åŠ¡ï¼‰å¯¹æŠ—å¹»è§‰
- **Few-Shot Learning**ï¼šç¤ºä¾‹å¼•å¯¼ï¼Œæå‡å›ç­”è´¨é‡
- **Chain-of-Thought**ï¼šæ€ç»´é“¾æ¨ç†ï¼Œå¢å¼ºé€»è¾‘æ€§
- **æ™ºèƒ½è·¯ç”±**ï¼šæ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ¨¡å‹
- **ä¼˜é›…é™çº§**ï¼šæ¨¡å‹ä¸å­˜åœ¨æ—¶è‡ªåŠ¨å›é€€å¤‡é€‰

### 3. W-TinyLFU æ ‡ç­¾ç®—æ³• ï¿½ï¸

- **åŒå±‚ç¼“å­˜**ï¼šWindowï¼ˆçŸ­æœŸï¼‰+ Mainï¼ˆé•¿æœŸï¼‰æ¶æ„
- **é‡å æ ‡ç­¾å¿«é€Ÿä¸Šæµ®**ï¼šæƒé‡ Ã—2ï¼Œå¿«é€Ÿå“åº”æ–°å…´è¶£
- **åŠçƒ­åº¦è¡°å‡**ï¼šæŒ‡æ•°è¡°å‡ W(t) = W0 Ã— 0.5^(t/T)ï¼Œæ—§å…´è¶£å¹³æ»‘æ·¡å‡º
- **Bloom Filter**ï¼šå¿«é€Ÿè¿‡æ»¤æ— æ•ˆæ ‡ç­¾ï¼Œé¿å…ç¼“å­˜æ±¡æŸ“
- **æ ‡ç­¾èåˆ**ï¼šç”»åƒæ ‡ç­¾ + èŠå¤©æ ‡ç­¾ = ç»¼åˆæƒé‡

### 4. ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ ğŸ¯

- **åƒäººåƒé¢**ï¼š60% æ ‡ç­¾ + 20% ååŒ + 10% çƒ­é—¨ + 10% æ¢ç´¢
- **æ™ºèƒ½ç¼“å­˜**ï¼šRedis ç¼“å­˜ 24 å°æ—¶ï¼ŒæŒ‰æƒé‡åŒºé—´å¤ç”¨
- **AI ç”Ÿæˆæ¨è**ï¼šåŸºäºç”¨æˆ·æ ‡ç­¾åŠ¨æ€ç”Ÿæˆå¸å¼•äººçš„é—®é¢˜
- **å¯¹è¯å¼•å¯¼**ï¼šä¼šè¯ç»“æŸåæ¨è 3-5 ä¸ªç›¸å…³è¯é¢˜
- **å®æ—¶æ›´æ–°**ï¼šå¼‚æ­¥æ›´æ–°ç”¨æˆ·ç”»åƒï¼Œä¸é˜»å¡ä¸»æµç¨‹

### 5. å¤šæ¨¡æ€å¯¹è¯èƒ½åŠ› ğŸ–¼ï¸

- **å›¾ç‰‡ä¸Šä¼ **ï¼šMinIO å¯¹è±¡å­˜å‚¨
- **OCR è¯†åˆ«**ï¼šDashScope è‡ªåŠ¨æå–æ–‡å­—ã€è¡¨æ ¼ã€å…¬å¼
- **æ¨¡å‹è‡ªé€‚åº”**ï¼šæœ‰å›¾ç‰‡è‡ªåŠ¨åˆ‡æ¢ Vision æ¨¡å‹
- **å¯¹è¯å¢å¼º**ï¼šOCR æ–‡å­—è‡ªåŠ¨é™„åŠ åˆ°æé—®
- **ASR è¯­éŸ³è¯†åˆ«**ï¼šRecordRTC å½•åˆ¶ WAVï¼Œå®æ—¶è½¬æ–‡å­—

### 6. å“åº”å¼ç¼–ç¨‹ ğŸš€

- **Project Reactor**ï¼šåŸºäºå“åº”å¼æµ
- **éé˜»å¡ I/O**ï¼šé«˜å¹¶å‘å¤„ç†
- **CompletableFuture**ï¼šå¼‚æ­¥ä»»åŠ¡å¹¶è¡Œ
- **èƒŒå‹ç®¡ç†**ï¼šæµé‡æ§åˆ¶ï¼Œé˜²æ­¢è¿‡è½½

### 7. æ™ºèƒ½æ–‡æ¡£å¤„ç† ğŸ“„

- **è¯­ä¹‰åŒ–åˆ†å—**ï¼šæ®µè½çº§è¯­ä¹‰ä¿æŒ
- **å¥å­è¾¹ç•Œè¯†åˆ«**ï¼šä¸­æ–‡ä¼˜åŒ–
- **åŠ¨æ€é‡å ç­–ç•¥**ï¼š200 å­—ç¬¦é‡å ï¼Œä¿æŒä¸Šä¸‹æ–‡
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šPDF/Word/PPT/Markdown/TXT

### 8. MCP å·¥å…·ç”Ÿæ€ ğŸŒ

- **DashScope å…¨ç½‘æœç´¢**ï¼šå®æ—¶è·å–æœ€æ–°ä¿¡æ¯
- **å¤©æ°”æŸ¥è¯¢**ï¼šé«˜å¾·å¤©æ°” API
- **è·¯çº¿è§„åˆ’**ï¼šé©¾è½¦/æ­¥è¡Œ/éª‘è¡Œä¸‰ç§æ¨¡å¼
- **ä½ç½®æœåŠ¡**ï¼šåœ°ç†ç¼–ç  + å‘¨è¾¹æ¢ç´¢
- **æ•°æ®åº“æŸ¥è¯¢**ï¼šPgSQL MCP
- **ä¸ªæ€§æ¨è**ï¼šåŸºäºç”¨æˆ·ç”»åƒ

### 9. å®‰å…¨è®¤è¯æœºåˆ¶ ğŸ”

- **æ¡ä»¶åŒ–åŠ è½½**ï¼šæ¨¡å—åŒ–å®‰å…¨é…ç½®
- **æ— çŠ¶æ€ JWT**ï¼šè·¨æœåŠ¡å…±äº«
- **è½»é‡è®¤è¯**ï¼šChat æ¨¡å—ç®€åŒ–è®¤è¯æµç¨‹

---

## ğŸ—ºï¸ åç»­è§„åˆ’

### V2.0 å·²å®Œæˆ âœ…

- [x] **æ¶æ„å±‚**ï¼šæœåŠ¡æ¨¡å—æ‹†åˆ†ï¼ˆsystem/membership/ai-chatï¼‰
- [x] **æ¶æ„å±‚**ï¼šå¤šæ¨¡å‹ SPI æœºåˆ¶ï¼ˆDashScope/OpenAI/DeepSeekï¼‰
- [x] **æ¶æ„å±‚**ï¼šMCP Schema ç»Ÿä¸€ç®¡ç†
- [x] **AI èƒ½åŠ›**ï¼šPrompt å·¥ç¨‹é‡æ„ï¼ˆå¯¹æŠ—å¹»è§‰ï¼‰
- [x] **AI èƒ½åŠ›**ï¼šW-TinyLFU æ ‡ç­¾ç®—æ³•ï¼ˆå¿«é€Ÿä¸Šæµ® + åŠè¡°å‡ï¼‰
- [x] **AI èƒ½åŠ›**ï¼šæ·±åº¦æ€è€ƒåŠŸèƒ½ï¼ˆCoTï¼Œæ€è€ƒè¿‡ç¨‹å¾…ä¼˜åŒ–ï¼‰
- [x] **AI èƒ½åŠ›**ï¼šè”ç½‘æœç´¢ï¼ˆDashScope enableSearchï¼‰
- [x] **ç”¨æˆ·ä½“éªŒ**ï¼šä¼šå‘˜ç”»åƒç³»ç»Ÿ
- [x] **ç”¨æˆ·ä½“éªŒ**ï¼šä¸ªæ€§åŒ–æ¨èï¼ˆé¦–é¡µ + è¯é¢˜å¼•å¯¼ï¼‰
- [x] **ç”¨æˆ·ä½“éªŒ**ï¼šMarkdown å®æ—¶æ¸²æŸ“
- [x] **å¤šæ¨¡æ€**ï¼šOCR å›¾ç‰‡è¯†åˆ«ï¼ˆMinIO + DashScopeï¼‰
- [x] **å¤šæ¨¡æ€**ï¼šASR è¯­éŸ³è¯†åˆ«ï¼ˆRecordRTC + DashScopeï¼‰
- [x] **å¤šæ¨¡æ€**ï¼šé«˜å¾·åœ°å›¾æ·±åº¦é›†æˆ
- [x] **å‰ç«¯**ï¼šVue 3 ä»£ç ç»“æ„å¤§é‡æ”¹é€ 

### çŸ­æœŸç›®æ ‡ï¼ˆ1-2ä¸ªæœˆï¼‰

- [ ] **Agent å¢å¼º**ï¼šç»§ç»­å¢åŠ  MCPï¼ˆæ–°é—»ã€è‚¡ç¥¨ã€ç¿»è¯‘ç­‰ï¼‰
- [ ] **Agent å¢å¼º**ï¼šå®Œå–„ MCP Schema æ ‡å‡†
- [ ] **Agent å¢å¼º**ï¼šè€ƒè™‘å¯¹æ¥é«˜å¾· MCP åˆ°å‰ç«¯
- [ ] **ç§»åŠ¨ç«¯**ï¼šå¼€å‘ç§»åŠ¨ç«¯ APPï¼ˆReact Native / Flutterï¼‰
- [ ] **ç§»åŠ¨ç«¯**ï¼šé€‚é…è¯­éŸ³ã€å›¾åƒç­‰å¤šæ¨¡æ€äº¤äº’
- [ ] **è¿ç»´éƒ¨ç½²**ï¼šè´­ä¹°äº‘æœåŠ¡å™¨ï¼ŒDocker å®¹å™¨åŒ–éƒ¨ç½²
- [ ] **è¿ç»´éƒ¨ç½²**ï¼šCI/CD æµæ°´çº¿ + ç›‘æ§å‘Šè­¦

### ä¸­æœŸç›®æ ‡ï¼ˆ3-6ä¸ªæœˆï¼‰

- [ ] **å¾®æœåŠ¡æ‹†åˆ†**ï¼šå‚ç…§ Pig å¾®æœåŠ¡æ¶æ„å®Œæ•´æ‹†åˆ†
- [ ] **å¾®æœåŠ¡æ‹†åˆ†**ï¼šNacos æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒ
- [ ] **å¾®æœåŠ¡æ‹†åˆ†**ï¼šSpring Cloud Gateway + Sentinel + Skywalking
- [ ] **åŠŸèƒ½å¢å¼º**ï¼šå¯¹è¯å¯¼å‡ºåŠŸèƒ½ï¼ˆPDF/Markdownï¼‰
- [ ] **åŠŸèƒ½å¢å¼º**ï¼šTTS è¯­éŸ³åˆæˆ
- [ ] **åŠŸèƒ½å¢å¼º**ï¼šèŠå¤©ç»Ÿè®¡åˆ†æï¼ˆè¯äº‘ã€è¯é¢˜åˆ†æï¼‰
- [ ] **åŠŸèƒ½å¢å¼º**ï¼šä¼šå‘˜ç­‰çº§ä½“ç³»

### é•¿æœŸç›®æ ‡ï¼ˆ6ä¸ªæœˆ+ï¼‰

- [ ] **æ¨¡å‹å¾®è°ƒ**ï¼šæ„å»ºé¢†åŸŸæ•°æ®é›†
- [ ] **æ¨¡å‹å¾®è°ƒ**ï¼šå¾®è°ƒå¼€æºæ¨¡å‹ï¼ˆQwen/LLaMAï¼‰
- [ ] **æ¨¡å‹å¾®è°ƒ**ï¼šä½¿ç”¨ Python + PyTorch è®­ç»ƒ
- [ ] **æ¨¡å‹å¾®è°ƒ**ï¼šéƒ¨ç½²ç§æœ‰åŒ–æ¨¡å‹
- [ ] **ç¤¾äº¤åŠŸèƒ½**ï¼šAI ç¤¾äº¤æ¨èï¼ˆ"çŒœä½ å–œæ¬¢"ï¼‰
- [ ] **ç¤¾äº¤åŠŸèƒ½**ï¼šçµé­‚ä¼´ä¾£åŒ¹é…ï¼ˆåŸºäºå…´è¶£æ ‡ç­¾ï¼‰
- [ ] **ç¤¾äº¤åŠŸèƒ½**ï¼šè¯é¢˜ç¤¾åŒº + ç”¨æˆ·äº’åŠ¨
- [ ] **ä¼ä¸šçº§**ï¼šçŸ¥è¯†å›¾è°±ï¼ˆæ ‡ç­¾å…³ç³»ç½‘ç»œï¼‰
- [ ] **ä¼ä¸šçº§**ï¼šå¤šç§Ÿæˆ·éš”ç¦»ï¼ˆSaaSåŒ–ï¼‰
- [ ] **ä¼ä¸šçº§**ï¼šå®æ—¶ååŒç¼–è¾‘

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Spring AI å®˜æ–¹æ–‡æ¡£](https://docs.spring.io/spring-ai/reference/)
- [Spring AI Alibaba](https://github.com/alibaba/spring-ai-alibaba)
- [é˜¿é‡Œäº‘é€šä¹‰åƒé—®](https://dashscope.aliyun.com/)
- [PgVector æ–‡æ¡£](https://github.com/pgvector/pgvector)
- [Apache Tika](https://tika.apache.org/)
- [MinIO å®˜æ–¹æ–‡æ¡£](https://min.io/docs/minio/linux/index.html)
- [é«˜å¾·åœ°å›¾API](https://lbs.amap.com/api/webservice/summary)

---

## ğŸ‘¨â€ğŸ’» å¼€å‘è€…

**Author**: å”åœ£æ° (shengjie.tang)  
**Version**: 3.1.0  
**Last Update**: 2025-01-01  
**GitHub**: [ai_cms](https://github.com/shengjieTang4419/ai_cms)  
**åšå®¢**: [Spring AI å®æˆ˜ç³»åˆ—](https://blog.csdn.net/TT_4419)

### ç‰ˆæœ¬å†å²

**v3.1.0** (2025-01-01) ğŸ”¥

- âœ¨ **Thinkingæ¨¡å‹å®Œæ•´é›†æˆ**ï¼šæ”¯æŒæ€è€ƒè¿‡ç¨‹æµå¼è¾“å‡ºï¼Œå®ç°"å…ˆæ€è€ƒã€åå›ç­”"
- âœ¨ **çœŸæ­£çš„æµå¼è¾“å‡º**ï¼šä½¿ç”¨`Flux.from(rxFlowable).flatMap()`æ›¿ä»£é˜»å¡å¼`blockingForEach()`
- âœ¨ **Provideræ¶æ„ä¼˜åŒ–**ï¼šä»DCLåŒé‡æ£€æŸ¥é”æ”¹ä¸ºSpring `@PostConstruct`å•ä¾‹ç®¡ç†
- âœ¨ **åŠ¨æ€Thinkingé€‰æ‹©**ï¼šæ–°å¢`getThinkingProvider()`ï¼Œè‡ªåŠ¨é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„Thinkingæ¨¡å‹
- âœ¨ **æ–°å¢æ¨¡å‹æ”¯æŒ**ï¼š`qwen-plus`ï¼ˆpriority=1ï¼‰ã€`qwen3-next-80b-a3b-thinking`ï¼ˆpriority=3ï¼‰

**v3.0.0** (2024-12-24)

- âœ¨ **å¾®æœåŠ¡æ¶æ„**ï¼šå®Œæ•´æ‹†åˆ†ä¸º5ä¸ªç‹¬ç«‹æœåŠ¡ï¼ˆauth/gateway/system/membership/ai-chatï¼‰
- âœ¨ **Nacosé›†æˆ**ï¼šæ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒ
- âœ¨ **Spring Cloud Gateway**ï¼šç»Ÿä¸€APIç½‘å…³
- âœ¨ **ç»Ÿä¸€è®¤è¯**ï¼šJWT + Tokenè‡ªåŠ¨åˆ·æ–°
- âœ¨ **Dockerå®¹å™¨åŒ–**ï¼šDocker Composeä¸€é”®éƒ¨ç½²

**v2.0.0** (2024-11-30)

- âœ¨ **æ¶æ„é‡æ„**ï¼šæœåŠ¡æ¨¡å—æ‹†åˆ†ï¼ˆsystem/membership/ai-chatï¼‰
- âœ¨ **å¤šæ¨¡å‹ SPI**ï¼šæ”¯æŒ DashScopeã€OpenAIã€DeepSeek çƒ­æ’æ‹”
- âœ¨ **MCP Schema**ï¼šç»Ÿä¸€å·¥å…·ç®¡ç†ï¼Œæ”¯æŒå¤©æ°”ã€ä½ç½®ã€è·¯çº¿è§„åˆ’
- âœ¨ **Prompt å·¥ç¨‹**ï¼šå¯¹æŠ— AI å¹»è§‰ï¼ŒFew-Shot + CoT
- âœ¨ **W-TinyLFU æ ‡ç­¾ç®—æ³•**ï¼šé‡å æ ‡ç­¾å¿«é€Ÿä¸Šå‡ + åŠçƒ­åº¦è¡°å‡
- âœ¨ **ä¼šå‘˜ç”»åƒ**ï¼šå¤šç»´åº¦ç”¨æˆ·æ´å¯Ÿ
- âœ¨ **ä¸ªæ€§åŒ–æ¨è**ï¼šé¦–é¡µæ¨è + è¯é¢˜å¼•å¯¼
- âœ¨ **Markdown å®æ—¶æ¸²æŸ“**ï¼šæµå¼è¾“å‡ºå®Œç¾æ”¯æŒ
- âœ¨ **OCR å›¾ç‰‡è¯†åˆ«**ï¼šMinIO å­˜å‚¨ + DashScope OCR
- âœ¨ **ASR è¯­éŸ³è¯†åˆ«**ï¼šRecordRTC + DashScope ASR
- âœ¨ **é«˜å¾·åœ°å›¾é›†æˆ**ï¼šè·¯çº¿è§„åˆ’ + å‘¨è¾¹æ¢ç´¢ + å¤©æ°”æŸ¥è¯¢
- âœ¨ **è”ç½‘æœç´¢**ï¼šDashScope å…¨ç½‘æœç´¢
- âœ¨ **æ·±åº¦æ€è€ƒ**ï¼šChain-of-Thought æ¨ç†ï¼ˆâœ… V3.1å·²å®Œå–„ï¼‰
- âœ¨ **å‰ç«¯ä»£ç é‡æ„**ï¼šVue 3 + Composition API å¤§é‡ä¼˜åŒ–

**v1.0.0** (2024-11-01)

- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… åŸºç¡€ AI å¯¹è¯åŠŸèƒ½
- âœ… RAG æ–‡æ¡£é—®ç­”
- âœ… æµå¼å¯¹è¯å“åº”
- âœ… ä¸Šä¸‹æ–‡è”æƒ³è®°å¿†
- âœ… æ–‡æ¡£ä¸Šä¼ è§£æ
- âœ… å‘é‡åº“å­˜å‚¨æ£€ç´¢
- âœ… å¯¹è¯å†å²ç®¡ç†

---

## ğŸ“„ License

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ï¼Œä¸å¾—ç”¨äºå•†ä¸šç”¨é€”ã€‚

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ Spring AI å›¢é˜Ÿå’Œé˜¿é‡Œäº‘æä¾›çš„ä¼˜ç§€æ¡†æ¶å’ŒæœåŠ¡ï¼

